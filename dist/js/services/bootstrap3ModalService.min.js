"use strict";var bootstrap3ModalService=function(t){var n,a=void 0;(t=$.extend({},spa.dialogDefaults,t)).confirmBtn.class=t.confirmBtn.class?t.confirmBtn.class:"btn-default",t.cancelBtn.class=t.cancelBtn.class?t.cancelBtn.class:"btn-default";var i='<div id="_spa-modal" class="modal fade" tabindex="-1" role="dialog"><div class="modal-dialog '+t.dialogClass+'" role="document"><div class="modal-content">';t.title&&(i+='<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n<h4 class="modal-title">'+t.title+"</h4></div>"),i+='<div class="modal-body text-center">',t.icon&&(i+='<h3 class="text-'+t.status+'" style="margin-top: 0;">'+t.icon+"</h3>"),t.message&&(i+='<p style="font-size: 18px;">'+t.message+"</p>"),i+='<div id="_spa-dialog-content" style="width: 80%; margin: 23px auto 0;"></div>',(t.confirmBtn.text||t.cancelBtn.text)&&(i+='</div><div class="modal-footer text-right">',t.confirmBtn.text&&(i+='<button id="_spa-dialog-confirm" type="button" class="btn '+t.confirmBtn.class+'" style="min-width: 80px;">'+t.confirmBtn.text+"</button> "),t.cancelBtn.text&&(i+='<button id="_spa-dialog-cancel" type="button" class="btn '+t.cancelBtn.class+'" style="min-width: 80px;">'+t.cancelBtn.text+"</button> "),i+="</div>"),i+="</div></div></div></div>",a=$(i),a.find("#_spa-dialog-confirm"),t.input&&a.find("#_spa-dialog-content").append(t.input),$("body").append(a);var o=!1,e=void 0;t.confirmBtn.text&&a.on("click","#_spa-dialog-confirm",function(){if(o=!0,t.input){if(!spa.validation.validate(a))return;e=spa.form.getFormInputsAsObject(a)}t.preConfirm&&t.preConfirm.call(l,e),t.closeOnConfirm&&l.hide()}),t.cancelBtn.text&&a.on("click","#_spa-dialog-cancel",function(){l.hide()}),a.on("hidden.bs.modal",function(){o&&t.onConfirm?t.onConfirm.call(l,e):!o&&t.onCancel&&t.onCancel.call(l),a.remove(),l=void 0}),a.modal(),t.input&&a.find("input").first().focus(),n=a.find("#_spa-dialog-confirm");var l={hide:function(){a.modal("hide")},showLoading:function(){n.length&&spa.dom.setLoadingButton(n)},removeLoading:function(){n.length&&spa.dom.unsetLoadingButton(n)}};return l};