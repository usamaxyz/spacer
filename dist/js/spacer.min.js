"use strict";function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var spa=function(){var e=["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],a=["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],t=["أح","اث","ث","أر","خ","ج","س"],n=["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","أب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],d={integer:1,float:2,string:3,timeline:4,email:5,url:6,in:7,check:8,file:9,regex:10,array:11},c={required:1,positive:2,negative:3,min:4,max:5,range:6,not:7,confirmed:8,of:9,not_of:10,len:11,format:12,in_domain:13,not_in_domain:14,items:15,ext:16,pattern:17,s_min:18,s_max:19,s_range:20,lite:21,pre:22},h={validationTag:"data-v-p",friendlyName:"data-v-fn",cachedValidationEntry:"_spa-cve",confirmInput:"_spa-ci",isEventAttached:"_spa-iea",needValidation:"_spa-nv",timer:"_spa-t",loadingHtml:"_spa-original-html"},r="_spa-cve _spa-ci _spa-iea _spa-nv _spa-t",m={locale:"en",debug:!1,timelineFormat:"D-M-YYYY",trimValues:!0,ajaxOnError:function(e){spa.dialog.messageError(spa.resource.get("ajax.errorTitle"),spa.resource.get("ajax.errorBody")+e.status)},ajaxLaravelHeader:!1,ajaxHeader:void 0,tokenValue:void 0,tokenName:void 0,dialogCurrentDriver:"alert",dialogDrivers:{alert:{message:function(e,a,t,n,r){window.alert(e+"\n"+a),r&&r()},confirm:function(e,a,t,n,r,i){window.confirm(e+"\n"+a)?r():i&&i()},prompt:function(e,a,t,n,r,i,o){o=window.prompt(e+"\n"+a,o);null===o?i&&i():r(o)}},sweetAlert:{message:function(e,a,t,n,r){swal({title:e,text:a,icon:s(n),button:spa.resource.get("btn.ok")}).then(function(){r&&r()})},confirm:function(e,a,t,n,r,i){swal({title:e,text:a,icon:s(n),dangerMode:!0,buttons:[spa.resource.get("btn.no"),spa.resource.get("btn.yes")]}).then(function(e){e?r():i&&i()})},prompt:function(e,a,t,n,r,i,o){swal({title:e,text:a,icon:s(n),content:{element:"input",attributes:{defaultValue:o}},buttons:[spa.resource.get("btn.cancel"),spa.resource.get("btn.continue")]}).then(function(e){null===e?i&&i():r(e)})}}},flashCurrentDriver:"",flashDrivers:{},validationCurrentDriver:"dialog",validationDrivers:{silent:{onError:function(){},clearError:function(){}}},reValidationDelay:500,validationCustomRules:{min_input:{validate:function(e,a){var t=e.input.valueToValidate,n=e.pattern.rules[a],a=e.input.jquery.closest("form").find('input[name="'+n.params[0]+'"]');if(a.length&&(o=a.val())){var r="o"===n.params[1];switch(e.pattern.type){case d.integer:case d.float:var i=parseFloat(t),o=parseFloat(o);if(isNaN(o))return!1;if(r){if(i<=o)return!1}else if(i<o)return!1;break;case d.timeline:i=e.pattern.timelineFormat.params[0];if(r){if(!spa.validation.isTimelineAfter(t,o,i))return!1}else if(!spa.validation.isTimelineAfterOrEqual(t,o,i))return!1}}return!0},getErrorMessage:function(e,a){var t=e.pattern.invalidRules[a],n="min"+("o"===t.params[1]?"_o":"_i"),r=t.params[2],a=void 0;return r=(r=r||(a=e.input.jquery.closest("form").find('input[name="'+t.params[0]+'"]')).attr(h.friendlyName))||a.val(),spa.resource.get(e.pattern.name+"."+n,{fn:e.input.friendlyName,p1:r})}},max_input:{validate:function(e,a){var t=e.input.valueToValidate,n=e.pattern.rules[a],a=e.input.jquery.closest("form").find('input[name="'+n.params[0]+'"]');if(a.length&&(o=a.val())){var r="o"===n.params[1];switch(e.pattern.type){case d.integer:case d.float:var i=parseFloat(t),o=parseFloat(o);if(isNaN(o))return!1;if(r){if(o<=i)return!1}else if(o<i)return!1;break;case d.timeline:i=e.pattern.timelineFormat.params[0];if(r){if(!spa.validation.isTimelineBefore(t,o,i))return!1}else if(!spa.validation.isTimelineBeforeOrEqual(t,o,i))return!1}}return!0},getErrorMessage:function(e,a){var t=e.pattern.invalidRules[a],n="max"+("o"===t.params[1]?"_o":"_i"),r=t.params[2],a=void 0;return r=(r=r||(a=e.input.jquery.closest("form").find('input[name="'+t.params[0]+'"]')).attr(h.friendlyName))||a.val(),spa.resource.get(e.pattern.name+"."+n,{fn:e.input.friendlyName,p1:r})}}},validationPre:void 0,validationIsLite:!1,momentLocales:{ar:{months:n,monthsShort:["كانون 2","شباط","آذار","نيسان","أيار","حزيران","تموز","أب","أيلول","تشرين 1","تشرين 2","كانون 1"],weekdays:e,weekdaysShort:a,weekdaysMin:t,weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}}},select2Ar:{errorLoading:function(){return"لا يمكن تحميل النتائج"},inputTooLong:function(e){return"الرجاء حذف "+(e.input.length-e.maximum)+" عناصر"},inputTooShort:function(e){return"الرجاء إضافة "+(e.minimum-e.input.length)+" عناصر"},loadingMore:function(){return"جاري تحميل نتائج إضافية..."},maximumSelected:function(e){return"تستطيع إختيار "+e.maximum+" بنود فقط"},noResults:function(){return"لم يتم العثور على أي نتائج"},searching:function(){return"جاري البحث…"},removeAllItems:function(){return"قم بإزالة كل العناصر"}},datepickerOptions:{ar:{closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:n,monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:e,dayNamesShort:a,dayNamesMin:t,weekHeader:"أسبوع",firstDay:1,isRTL:!0,showMonthAfterYear:!1,yearSuffix:"",dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,showButtonPanel:!0},en:{dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,showButtonPanel:!0}},datatableOptions:{ar:{paging:!1,info:!1,searching:!1,order:[],language:{decimal:"",emptyTable:"لا توجد بيانات",info:"عرض _START_ إلى _END_. الاجمالي _TOTAL_ عنصر",infoEmpty:"لا توجد بيانات",infoFiltered:"(filtered from _MAX_ total entries)",infoPostFix:"",thousands:",",lengthMenu:"عدد المداخل في كل صفحة  _MENU_",loadingRecords:"جاري التحميل...",processing:"جاري المعالجة...",search:"فلترة: ",zeroRecords:"لا توجد بيانات مطابقة",paginate:{first:"البداية",last:"النهاية",next:"التالي",previous:"السابق"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}}},en:{paging:!1,info:!1,searching:!1,order:[]}},localeMethod:2,localeQueryKey:"lang",defaultLocale:"en",btnLoadingCurrentDriver:"spin",btnLoadingDrivers:{spin:{set:function(e){if((e=g(e)).length)return e.data(h.loadingHtml,e.html()),e.css("min-width",e.css("width")),e.html(spa.resource.get("icon.loading")),spa.dom.setDisable(e,!0),e},unset:function(e,a){if((e=g(e)).length)return e.html(a||e.data(h.loadingHtml)),spa.dom.setDisable(e,!1),e.css("min-width","auto"),e}}}},i={"btn.ok":{en:"Ok",ar:"موافق"},"btn.cancel":{en:"Cancel",ar:"الغاء"},"btn.continue":{en:"Continue",ar:"المتابعة"},"btn.yes":{en:"Yes",ar:"نعم"},"btn.no":{en:"No",ar:"لا"},"ajax.errorTitle":{en:"Request Error",ar:"فشل الطلب"},"ajax.errorBody":{en:"The request has been failed with error code: ",ar:"حدث خطأ في الطلب. رقم الخطأ: "},"validation.errorTitle":{en:"Validation Error",ar:"خطأ في البيانات"},"validation.defaultFriendlyName":{en:"value",ar:"المدخل"},"delete.title":{en:"Delete Item",ar:"حذف العنصر"},"delete.confirm":{en:"Item to be deleted. Continue?",ar:"سيتم حذف العنصر. المتابعة؟"},"integer.integer":{en:"The :fn must be an integer number",ar:"يجب أن يكون :fn رقم صحيح"},"integer.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"integer.positive":{en:"The :fn must be positive number",ar:"يجب أن يكون :fn رقم موجب"},"integer.negative":{en:"The :fn must be negative number",ar:"يجب أن يكون :fn رقم سالب"},"integer.min_i":{en:"The :fn must be greater than or equal :p1",ar:" يجب أن يكون :fn :p1 على الأقل"},"integer.min_o":{en:"The :fn must be greater than :p1",ar:" يجب أن يكون :fn أكبر من :p1"},"integer.max_i":{en:"The :fn must be less than or equal :p1",ar:"يجب أن يكون :fn :p1 على الأكثر"},"integer.max_o":{en:"The :fn must be less than :p1",ar:"يجب أن يكون :fn أقل من :p1"},"integer.range":{en:"The :fn must be between :p1 and :p2",ar:"يجب أن يكون :fn بين :p1 و :p2"},"integer.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"integer.not":{en:"The :fn is invalid",ar:":fn غير صالح"},"float.float":{en:"The :fn must be a float number",ar:"يجب أن يكون :fn رقم صحيح"},"float.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"float.positive":{en:"The :fn must be positive number",ar:"يجب أن يكون :fn رقم صحيح موجب"},"float.negative":{en:"The :fn must be negative number",ar:"يجب أن يكون :fn رقم صحيح سالب"},"float.min_i":{en:"The :fn must be greater than or equal :p1",ar:" يجب أن يكون :fn :p1 على الأقل"},"float.min_o":{en:"The :fn must be greater than :p1",ar:" يجب أن يكون :fn أكبر من :p1"},"float.max_i":{en:"The :fn must be less than or equal :p1",ar:"يجب أن يكون :fn :p1 على الأكثر"},"float.max_o":{en:"The :fn must be less than :p1",ar:"يجب أن يكون :fn أقل من :p1"},"float.range":{en:"The :fn must be between :p1 and :p2",ar:"يجب أن يكون :fn بين :p1 و :p2"},"float.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"float.not":{en:"The :fn is invalid",ar:":fn غير صالح"},"array.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"array.min_i":{en:"The :fn must contain :p1 item(s) at least",ar:"يجب أن يحوي :fn :p1 عنصر على الأقل"},"array.min_o":{en:"The :fn must contain more than :p1 item(s)",ar:"يجب أن يحوي :fn أكثر من :p1 عنصر"},"array.max_i":{en:"The :fn may not contain more than :p1 item(s)",ar:"يجب أن يحوي :fn :p1 عنصر على الأكثر"},"array.max_o":{en:"The :fn must contain less than :p1 item(s)",ar:"يجب أن يحوي :fn أقل من :p1 عنصر"},"array.range":{en:"The :fn must conatin between :p1 and :p2 item(s)",ar:"يجب أن يحوي :fn :p1 إلى :p2 عنصر"},"array.len":{en:"The :fn must contain :p1 character(s)",ar:"يجب أن يحوي :fn :p1 عنصر"},"string.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"string.of":{en:"The :fn contains unacceptable character(s)",ar:":fn يحوي رموز غير صالحة"},"string.not_of":{en:"The :fn contains unacceptable character(s)",ar:":fn يحوي رموز غير صالحة"},"string.min_i":{en:"The :fn must be :p1 character(s) at least",ar:"يجب أن يكون :fn بطول :p1 محرف على الأقل"},"string.min_o":{en:"The :fn must be more than :p1 character(s)",ar:"يجب أن يكون :fn أكثر من :p1 محرف"},"string.max_i":{en:"The :fn may not contain more than :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف على الأكثر"},"string.max_o":{en:"The :fn must be less than :p1 character(s)",ar:"يجب أن يكون :fn أقل من :p1 محرف"},"string.range":{en:"The :fn must be between :p1 and :p2 character(s)",ar:"يجب أن يكون :fn بطول :p1 إلى :p2 محرف"},"string.len":{en:"The :fn must be :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف"},"string.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"string.not":{en:"The :fn is invalid",ar:":fn غير صالح"},"check.required":{en:"Please choose :fn",ar:"يرجى اختيار :fn"},"timeline.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"timeline.format":{en:"The :fn is not in the correct format: :p1",ar:":fn ليس بالتنسيق المطلوب: :p1"},"timeline.min_i":{en:"The :fn must be a date after or equal :p1",ar:" يجب أن يكون :fn أكبر من أو يساوي :p1"},"timeline.min_o":{en:"The :fn must be a date after :p1",ar:" يجب أن يكون :fn أكبر من :p1"},"timeline.max_i":{en:"The :fn must be a date before or equal :p1",ar:" يجب أن يكون :fn أصغر من أو يساوي :p1"},"timeline.max_o":{en:"The :fn must be a date before :p1",ar:" يجب أن يكون :fn أصغر من :p1"},"timeline.range":{en:"The :fn must be between :p1 and :p2",ar:"يجب أن يكون :fn بين :p1 و :p2"},"timeline.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"email.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"email.email":{en:"The :fn must be a valid email address",ar:":fn غير صالح"},"email.min_i":{en:"The :fn must be :p1 character(s) at least",ar:"يجب أن يكون :fn بطول :p1 محرف على الأقل"},"email.min_o":{en:"The :fn must be more than :p1 character(s)",ar:"يجب أن يكون :fn أكثر من :p1 محرف"},"email.max_i":{en:"The :fn may not contain more than :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف على الأكثر"},"email.max_o":{en:"The :fn must be less than :p1 character(s)",ar:"يجب أن يكون :fn أقل من :p1 محرف"},"email.range":{en:"The :fn must be between :p1 and :p2 character(s)",ar:"يجب أن يكون :fn بطول :p1 إلى :p2 محرف"},"email.in_domain":{en:"The :fn must be in these domains: :p1",ar:"يجب أن يكون :fn ضمن النطاقات التالية: :p1"},"email.not_in_domain":{en:"The :fn may not be in these domains: :p1",ar:"يجب أن يكون :fn خارج النطاقات التالية: :p1"},"email.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"url.url":{en:"The :fn must be a valid url",ar:":fn غير صالح"},"url.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"url.min_i":{en:"The :fn must be :p1 character(s) at least",ar:"يجب أن يكون :fn بطول :p1 محرف على الأقل"},"url.min_o":{en:"The :fn must be more than :p1 character(s)",ar:"يجب أن يكون :fn أكثر من :p1 محرف"},"url.max_i":{en:"The :fn may not contain more than :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف على الأكثر"},"url.max_o":{en:"The :fn must be less than :p1 character(s)",ar:"يجب أن يكون :fn أقل من :p1 محرف"},"url.range":{en:"The :fn must be between :p1 and :p2 character(s)",ar:"يجب أن يكون :fn بطول :p1 إلى :p2 محرف"},"url.in_domain":{en:"The :fn must be in these domains: :p1",ar:"يجب أن يكون :fn ضمن النطاقات التالية: :p1"},"url.not_in_domain":{en:"The :fn may not be in these domains: :p1",ar:"يجب أن يكون :fn خارج النطاقات التالية: :p1"},"url.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"in.items":{en:"The :fn is invalid",ar:":fn غير صالح"},"in.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"file.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"file.min_i":{en:"The :fn must be at least :p1MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn :p1MB على الأقل"},"file.min_o":{en:"The :fn must be larger than :p1MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn أكبر من :p1MB"},"file.max_i":{en:"The :fn may not be greater than :p1MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn :p1MB على الأكثر"},"file.max_o":{en:"The :fn may not be greater than :p1MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn أقل من :p1MB"},"file.range":{en:"The :fn must be between :p1MB and :p2MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn من :p1MB إلى :p2MB"},"file.s_min_i":{en:"Each file in :fn must be at least :p1MB in total",ar:"يجب أن يكون حجم الملف الواحد في :fn :p1MB على الأقل"},"file.s_min_o":{en:"Each file in :fn must be larger than :p1MB in total",ar:"يجب أن يكون حجم الملف الواحد في :fn أكبر من :p1MB"},"file.s_max_i":{en:"Each file in :fn may not be greater than :p1MB in total",ar:"يجب أن يكون حجم الملف الواحد في :fn :p1MB على الأكثر"},"file.s_max_o":{en:"The :fn may not be greater than :p1MB in total",ar:"يجب أن يكون حجم الملف الواحد في :fn أقل من :p1MB"},"file.s_range":{en:"Each file in :fn must be between :p1MB and :p2MB",ar:"يجب أن يكون حجم الملف الواحد في :fn من :p1MB إلى :p2MB"},"file.ext":{en:"The :fn file(s) must be one of these formats: :p1",ar:"يجب أن تكون كل الملفات في :fn بأحد الصيغ التالية: :p1"},"file.len":{en:"The :fn may have :p1 file(s)",ar:"يجب أن يحوي :fn على :p1 ملف (ملفات)"},"regex.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"regex.pattern":{en:"The :fn is not valid",ar:":fn غير صالح"},"regex.min_i":{en:"The :fn must be :p1 character(s) at least",ar:"يجب أن يكون :fn بطول :p1 محرف على الأقل"},"regex.min_o":{en:"The :fn must be more than :p1 character(s)",ar:"يجب أن يكون :fn أكثر من :p1 محرف"},"regex.max_i":{en:"The :fn may not contain more than :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف على الأكثر"},"regex.max_o":{en:"The :fn must be less than :p1 character(s)",ar:"يجب أن يكون :fn أقل من :p1 محرف"},"regex.range":{en:"The :fn must be between :p1 and :p2 character(s)",ar:"يجب أن يكون :fn بطول :p1 إلى :p2 محرف"},"regex.len":{en:"The :fn must be :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف"},"regex.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"icon.loading":{def:'<i class="fa fa-spinner fa-spin fa-fw"></i>'},"icon.success":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-check fa-stack-1x"></i></span>'},"icon.danger":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-times fa-stack-1x"></i></span>'},"icon.warning":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-exclamation fa-stack-1x"></i></span>'},"icon.info":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-info fa-stack-1x"></i></span>'},"icon.question":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-question fa-stack-1x"></i></span>'},"ex.usst":{def:"Spacer Error: Unsupported string type: :p"},"ex.pmr":{def:"Spacer Error: The validation pattern :p misses a required rule: :r"},"ex.usp":{def:"Spacer Error: Unsupported pattern: :p"},"ex.se":{def:"Spacer Error: Syntax error: :p"},"ex.inf":{def:"Spacer Error: Invalid parameter for :p.:r rule: input with name :n not found"},"ex.ipc":{def:"Spacer Error: The validation rule :p.:r misses some parameters"},"ex.ipt":{def:"Spacer Error: Invalid parameter for :p.:r rule: :a"},"ex.pfnf":{def:"Spacer Error: pre function not found: :p"},"ex.rnf":{def:"Spacer Error: No such a rule: :p.:r"},"ex.mnf":{def:"Spacer Error: Error message not found for :p.:r"},"ex.ddnf":{def:"Spacer Error: Dialog driver :p or one of its functions not found"},"ex.vdnf":{def:"Spacer Error: Validation driver :p or one of its functions not found"},"ex.fdnf":{def:"Spacer Error: Flash driver :p or one of its functions not found"},"ex.bldnf":{def:"Spacer Error: Button loading driver :p or one of its functions not found"},"ex.fnf":{def:"Spacer Error: Form not found"},year:{en:"year",ar:"سنة"},month:{en:"month",ar:"شهر"},day:{en:"day",ar:"يوم"},hour:{en:"hour",ar:"ساعة"},minute:{en:"minute",ar:"دقيقة"},and:{en:"and",ar:"و"}};function s(e){return"danger"===e?"error":e}function g(e){return e instanceof $?e:$(e)}function p(e,a){return m.trimValues||a?e?e.trim():"":e||""}var u={setDialogCD:function(e){u.dialog=o(e),m.dialogCurrentDriver=e,u.validationIsDialog&&f(m.validationCurrentDriver)},setFlashCD:function(e){u.flash=l(e),m.flashCurrentDriver=e,u.validationIsFlash&&f(m.validationCurrentDriver)},setValidationCD:f,setBtnLoadingCD:function(e){u.btnLoading=function(e){var a=m.btnLoadingDrivers[e];if(m.debug&&!(a&&a.set&&a.unset))throw spa.resource.get("ex.bldnf",{p:e});return a}(e),m.btnLoadingCurrentDriver=e},dialog:void 0,flash:void 0,validation:void 0,btnLoading:void 0,validationIsDialog:!1,validationIsFlash:!1,validationIsDialogOrFlashDriver:!1};function o(e){var a=m.dialogDrivers[e];if(m.debug&&!(a&&a.message&&a.confirm&&a.prompt))throw spa.resource.get("ex.ddnf",{p:e});return a}function l(e){var a=m.flashDrivers[e];if(m.debug&&(!a||!a.flash))throw spa.resource.get("ex.fdnf",{p:e});return a}function f(e){var a=e.split(".");u.validationIsDialog="dialog"===a[0],u.validationIsFlash=!u.validationIsDialog&&"flash"===a[0],u.validationIsDialogOrFlashDriver=u.validationIsDialog||u.validationIsFlash,u.validationIsDialogOrFlashDriver?1===a.length?u.validation=u.validationIsDialog?m.dialogDrivers[m.dialogCurrentDriver]:m.flashDrivers[m.flashCurrentDriver]:u.validationIsDialog?u.validation=o(a[1]):u.validation=l(a[1]):u.validation=function(e){var a=m.validationDrivers[e];if(m.debug&&!(a&&a.onError&&a.clearError))throw spa.resource.get("ex.vdnf",{p:e});return a}(a[0]),m.validationCurrentDriver=e}function v(e){return e.find("input, textarea, select").not(":input[type=button], :input[type=submit], :input[type=reset]")}function b(){var e;window.moment&&("en"===(e=m.locale)?moment.locale("en"):moment.locale(e)!==e&&m.momentLocales[m.locale]&&moment.locale(e,m.momentLocales[m.locale]))}function y(e){return{jquery:e,name:e.attr("name"),friendlyName:spa.dom.getFriendlyName(e),originalValue:"",valueToValidate:""}}function T(e,a){return{params:a,type:c[e],name:e,message:void 0}}function x(e,a){return{input:y(e),confirmInput:void 0,pattern:{string:a,type:-1,name:void 0,rules:[],isLite:m.validationIsLite,timelineFormat:void 0,required:void 0,pre:[],invalidRules:[]}}}u.setDialogCD(m.dialogCurrentDriver),u.setValidationCD(m.validationCurrentDriver),u.setBtnLoadingCD(m.btnLoadingCurrentDriver);var w={populateErrorMessages:function(e){for(var a=void 0,t=void 0,n=void 0,r=0,i=e.pattern.invalidRules.length;r<i;r++){switch(n=!0,(a=e.pattern.invalidRules[r]).type){case c.min:case c.max:var o=a.name+(F.isOut(a)?"_o":"_i"),t=D(e.input.jquery,e.pattern.name,o);t=spa.resource.replace(t,{fn:e.input.friendlyName});break;case c.in_domain:case c.not_in_domain:case c.ext:for(var s="",u=0,l=a.params.length;u<l-1;u++)s+=a.params[u]+", ";s+=a.params[u],t=D(e.input.jquery,e.pattern.name,a.name),t=spa.resource.replace(t,{fn:e.input.friendlyName,p1:s}),n=!1;break;default:t=(t=D(e.input.jquery,e.pattern.name,a.name))&&spa.resource.replace(t,{fn:e.input.friendlyName})}t?n&&(t=t.replace(/:p[1-9]/g,function(e){return a.params[parseInt(e[2])-1]})):t=function(e,a){var t=e.pattern.invalidRules[a];if(m.debug&&!(m.validationCustomRules&&m.validationCustomRules[t.name]&&spa.validation.isFunction(m.validationCustomRules[t.name].getErrorMessage)))throw spa.resource.get("ex.mnf",{p:e.pattern.name,r:t.name});return m.validationCustomRules[t.name].getErrorMessage(e,a)}(e,r),a.message=t}},clearErrorProxy:function(e){u.validationIsDialogOrFlashDriver||u.validation.clearError(e)},onErrorProxy:function(e){var a,t;u.validationIsDialogOrFlashDriver?(a=spa.resource.get("validation.errorTitle"),t=e.pattern.invalidRules[0].message,u.validationIsDialog?u.validation.message(a,t,"danger","danger"):u.validation.flash(a,t,"danger"),e.input.jquery.focus()):u.validation.onError(e)}};function D(e,a,t){return e.data("v-"+a+"-"+t+"-"+m.locale)||e.data("v-"+a+"-"+t)||spa.resource.get(a+"."+t)}var k={parse:function(e){var a=e.data(h.cachedValidationEntry);if(!a){var t=e.attr(h.validationTag);if(!(t=t&&t.trim()))return;V(a=x(e,t))}return(t=a).pattern.type===d.file?t.input.originalValue=t.input.jquery[0].files:t.pattern.type===d.array?t.input.originalValue=t.input.jquery.val():t.pattern.type===d.check?t.input.jquery.is(":checked")?t.input.originalValue=p(t.input.jquery.val())||"true":t.input.originalValue="":(t.input.originalValue=p(t.input.jquery.val()),t.confirmInput&&(t.confirmInput.originalValue=p(t.confirmInput.jquery.val()))),t.input.valueToValidate=t.input.originalValue,t.confirmInput&&(t.confirmInput.valueToValidate=t.confirmInput.originalValue),(t=a).input.jquery.data(h.cachedValidationEntry,t),a}};function V(e){var a=e.pattern.string,t=a.match(/^\s*([A-Za-z]+)\s*(?:\[\s*(.*)]\s*)?$/);if(!t)throw spa.resource.get("ex.se",{p:a});e.pattern.name=t[1].toLowerCase(),e.pattern.type=d[e.pattern.name];var n=t[2];if(n){var r=n.match(/~[^~.]+~/g);if(r)for(var i=0,o=r.length;i<o;i++)n=n.replace(r[i],"r");for(var s=n.split("|"),u=0,l=s.length;u<l;u++){var p=s[u].match(/^\s*([a-zA-Z_]+)\s*(?::\s*(.+))?$/);if(!p)throw spa.resource.get("ex.rnf",{p:e.pattern.name,r:s[u]});var f=p[1],m=void 0;if("pattern"===f||"format"===f){if(!r||!r.length)throw spa.resource.get("ex.ipc",{p:e.pattern.name,r:f});m=r.shift().match(/~([^~.]+)~/)[1]}else m=p[2];!function(e,a){switch(a.type){case c.lite:e.pattern.isLite=!0;break;case c.pre:e.pattern.pre=a.params;break;case c.required:e.pattern.required=a;break;case c.format:e.pattern.timelineFormat=a;break;case c.confirmed:!function(e,a){var t=void 0;t=a.length?a[0]:e.input.name+"_confirmation",(t=e.input.jquery.closest("form").find('input[name="'+t+'"]')).length&&(e.confirmInput=y(t),e.input.jquery.data(h.confirmInput,t))}(e,a.params),e.pattern.rules.push(a);break;default:e.pattern.rules.push(a)}}(e,T(f.toLowerCase(),function(e){var a=[];if(!e)return a;for(var t=e.split(","),n=0,r=t.length;n<r;n++){var i=t[n].trim();if(""===i)throw spa.resource.get("ex.se",{p:e});a.push(i)}return a}(m)))}}}var C={validate:function(e,a,t){if(!(e=g(e)).length)throw spa.resource.get("ex.fnf");var n=v(e),r=!0,i=u.validationIsDialogOrFlashDriver,o=n.length,s=0;for(t&&(n=n.not(t));s<o;s++)if(!P($(n[s]),a)&&(r=!1,i))return!1;return r},resetValidation:function(e){if(!(e=g(e)).length)throw spa.resource.get("ex.fnf");for(var a=v(e).off(".spa").removeData(r),t=0,n=a.length;t<n;t++)w.clearErrorProxy($(a[t]))},isValidInput:function(e,a){return P(g(e),a)}};function P(e,a){var t,n=k.parse(e);return!n||(n.pattern.invalidRules=[],w.clearErrorProxy(e),!!function(e){switch(e.pattern.type){case d.string:return A.string.set(e),A.string;case d.integer:return A.number.set(e,!0),A.number;case d.float:return A.number.set(e,!1),A.number;case d.timeline:return A.timeline.set(e),A.timeline;case d.email:return A.email.set(e),A.email;case d.url:return A.url.set(e),A.url;case d.in:return A.in.set(e),A.in;case d.file:return A.file.set(e),A.file;case d.regex:return A.regex.set(e),A.regex;case d.check:return A.check.set(e),A.check;case d.array:return A.array.set(e),A.array;default:throw spa.resource.get("ex.usp",{p:e.pattern.name})}}(n).validate()||(a||(w.populateErrorMessages(n),w.onErrorProxy(n),(t=n).input.jquery.data(h.isEventAttached)||(u.validationIsDialogOrFlashDriver||(t.input.jquery.data(h.needValidation,!0),t.input.jquery.on("input.spa",function(){clearTimeout(t.input.jquery.data(h.timer)),t.input.jquery.data(h.timer,setTimeout(function(){P(t.input.jquery),t.input.jquery.data(h.needValidation,!1)},m.reValidationDelay))}).on("change.spa",function(){clearTimeout(t.input.jquery.data(h.timer)),t.input.jquery.data(h.needValidation)?t.input.jquery.data(h.timer,setTimeout(function(){P(t.input.jquery)},m.reValidationDelay)):t.input.jquery.data(h.needValidation,!0)}),t.confirmInput&&(t.input.jquery.data(h.needValidation,!0),t.confirmInput.jquery.on("input.spa",function(){clearTimeout(t.input.jquery.data(h.timer)),t.input.jquery.data(h.timer,setTimeout(function(){P(t.input.jquery),t.input.jquery.data(h.needValidation,!1)},m.reValidationDelay))}).on("change.spa",function(){clearTimeout(t.input.jquery.data(h.timer)),t.input.jquery.data(h.needValidation)?t.input.jquery.data(h.timer,setTimeout(function(){P(t.input.jquery)},m.reValidationDelay)):t.input.jquery.data(h.needValidation,!0)}))),t.input.jquery.data(h.isEventAttached,!0))),!1))}var _,q,L,O,R,j,M,I,E,S,B,F={applyPreRules:function(e){var a=e.pattern.pre.length,t=e.pattern.pre;if(a){for(var n=0;n<a;n++){if(m.debug&&(!m.validationPre||!m.validationPre[t[n]]))throw spa.resource.get("ex.pfnf",{p:t[n]});e.input.valueToValidate=m.validationPre[t[n]](e.input.valueToValidate),e.confirmInput&&(e.confirmInput.valueToValidate=m.validationPre[t[n]](e.confirmInput.valueToValidate))}e.input.valueToValidate=p(e.input.valueToValidate.toString()),e.confirmInput&&(e.confirmInput.valueToValidate=p(e.confirmInput.valueToValidate.toString()))}},customRule:function(e,a){var t=e.pattern.rules[a];if(m.debug&&(!m.validationCustomRules||!m.validationCustomRules[t.name]||!spa.validation.isFunction(m.validationCustomRules[t.name].validate)))throw spa.resource.get("ex.rnf",{p:e.pattern.name,r:t.name});return m.validationCustomRules[t.name].validate(e,a)},validateParamsCount:function(e,a,t){if(t.params.length<e)throw spa.resource.get("ex.ipc",{p:a.pattern.name,r:t.name})},getParamValue:function(e,a,t,n,r){var i=void 0;switch(a){case"i":if(i=parseInt(e),isNaN(i)&&m.debug)throw spa.resource.get("ex.ipt",{p:t,r:n,a:e});return i;case"f":if(i=parseFloat(e),isNaN(i)&&m.debug)throw spa.resource.get("ex.ipt",{p:t,r:n,a:e});return i;case"t":if(!(i=spa.validation.isTimeline(e,r)))throw spa.resource.get("ex.ipt",{p:t,r:n,a:e});return i}},isOut:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=void 0;switch(e.type){case c.min:case c.s_min:case c.max:case c.s_max:return!!(t=e.params[1])&&"o"===t.toLowerCase();case c.range:case c.s_range:return!!(t=e.params[2])&&"o"===t.toLowerCase()[a]}return!1}},A={array:{set:function(e){B=e},validate:function(){F.applyPreRules(B);var e,a,t=B.pattern.invalidRules,n=B.pattern.rules.length,r=B.pattern.isLite,i=B.input.valueToValidate,o=void 0,s=void 0,u=m.debug;if(!i||!i.length){if(B.pattern.required){if(t.push(B.pattern.required),!r)for(o=0;o<n;o++)t.push(B.pattern.rules[o]);return!1}return!0}for(o=0;(!t.length||!r)&&o<n;){switch((e=B.pattern.rules[o]).type){case c.min:u&&F.validateParamsCount(1,B,e),s=F.getParamValue(e.params[0],"i",B.pattern.name,e.name),F.isOut(e)?i.length<=s&&t.push(e):i.length<s&&t.push(e);break;case c.max:u&&F.validateParamsCount(1,B,e),s=F.getParamValue(e.params[0],"i",B.pattern.name,e.name),F.isOut(e)?i.length>=s&&t.push(e):i.length>s&&t.push(e);break;case c.range:u&&F.validateParamsCount(2,B,e),s=F.getParamValue(e.params[0],"i",B.pattern.name,e.name),a=F.getParamValue(e.params[1],"i",B.pattern.name,e.name),F.isOut(e,0)?i.length<=s&&t.push(e):i.length<s&&t.push(e),F.isOut(e,1)?i.length>=a&&t.push(e):i.length>a&&t.push(e);break;case c.len:u&&F.validateParamsCount(1,B,e),s=F.getParamValue(e.params[0],"i",B.pattern.name,e.name),i.length!==s&&t.push(e);break;default:F.customRule(B,o)||t.push(e)}o++}return 0===t.length}},check:{set:function(e){S=e},validate:function(){return F.applyPreRules(S),!S.input.valueToValidate&&S.pattern.required?(S.pattern.invalidRules.push(S.pattern.required),!1):0===S.pattern.invalidRules.length}},email:{set:function(e){E=e},validate:function(){F.applyPreRules(E);var e,a=E.pattern.invalidRules,t=E.pattern.rules.length,n=E.pattern.isLite,r=E.input.valueToValidate,i=void 0,o=void 0,s=void 0,u=m.debug;if(!r){if(E.pattern.required){if(a.push(E.pattern.required),!n)for(a.push(T("email",void 0)),i=0;i<t;i++)a.push(E.pattern.rules[i]);return!1}return!0}if(!spa.validation.isEmail(r)){if(a.push(T("email",void 0)),!n)for(i=0;i<t;i++)a.push(E.pattern.rules[i]);return!1}for(i=0;(!a.length||!n)&&i<t;){switch((e=E.pattern.rules[i]).type){case c.min:u&&F.validateParamsCount(1,E,e),o=F.getParamValue(e.params[0],"i",E.pattern.name,e.name),F.isOut(e)?r.length<=o&&a.push(e):r.length<o&&a.push(e);break;case c.max:u&&F.validateParamsCount(1,E,e),o=F.getParamValue(e.params[0],"i",E.pattern.name,e.name),F.isOut(e)?r.length>=o&&a.push(e):r.length>o&&a.push(e);break;case c.range:u&&F.validateParamsCount(2,E,e),o=F.getParamValue(e.params[0],"i",E.pattern.name,e.name),s=F.getParamValue(e.params[1],"i",E.pattern.name,e.name),F.isOut(e,0)?r.length<=o&&a.push(e):r.length<o&&a.push(e),F.isOut(e,1)?r.length>=s&&a.push(e):r.length>s&&a.push(e);break;case c.in_domain:for(u&&F.validateParamsCount(1,E,e),o=[],s=e.params.length-1;0<=s;s--)o.push(e.params[s]);spa.validation.isStringContainsOneOfArray(r,o)||a.push(e);break;case c.not_in_domain:for(u&&F.validateParamsCount(1,E,e),o=[],s=e.params.length-1;0<=s;s--)o.push(e.params[s]);spa.validation.isStringContainsOneOfArray(r,o)&&a.push(e);break;case c.confirmed:E.confirmInput&&E.confirmInput.valueToValidate===r||a.push(e);break;default:F.customRule(E,i)||a.push(e)}i++}return 0===a.length}},file:{set:function(e){I=e},validate:function(){F.applyPreRules(I);var e,a=I.pattern.invalidRules,t=I.pattern.rules.length,n=I.pattern.isLite,r=I.input.valueToValidate,i=void 0,o=void 0,s=void 0,u=void 0,l=void 0,p=r.length,f=m.debug;if(0===p){if(I.pattern.required){if(a.push(I.pattern.required),!n)for(i=0;i<t;i++)a.push(I.pattern.rules[i]);return!1}return!0}for(i=0;(!a.length||!n)&&i<t;){switch((e=I.pattern.rules[i]).type){case c.min:for(f&&F.validateParamsCount(1,I,e),o=1024*F.getParamValue(e.params[0],"f",I.pattern.name,e.name)*1024,l=u=0;u<p;u++)l+=r[u].size;F.isOut(e)?l<=o&&a.push(e):l<o&&a.push(e);break;case c.max:for(f&&F.validateParamsCount(1,I,e),o=1024*F.getParamValue(e.params[0],"f",I.pattern.name,e.name)*1024,l=u=0;u<p;u++)l+=r[u].size;F.isOut(e)?o<=l&&a.push(e):o<l&&a.push(e);break;case c.range:for(f&&F.validateParamsCount(2,I,e),o=1024*F.getParamValue(e.params[0],"f",I.pattern.name,e.name)*1024,s=1024*F.getParamValue(e.params[1],"f",I.pattern.name,e.name)*1024,l=u=0;u<p;u++)l+=r[u].size;F.isOut(e,0)?l<=o&&a.push(e):l<o&&a.push(e),F.isOut(e,1)?s<=l&&a.push(e):s<l&&a.push(e);break;case c.s_min:for(f&&F.validateParamsCount(1,I,e),o=1024*F.getParamValue(e.params[0],"f",I.pattern.name,e.name)*1024,u=0;u<p;u++)F.isOut(e)?r[u].size<=o&&a.push(e):r[u].size<o&&a.push(e);break;case c.s_max:for(f&&F.validateParamsCount(1,I,e),o=1024*F.getParamValue(e.params[0],"f",I.pattern.name,e.name)*1024,u=0;u<p;u++)F.isOut(e)?r[u].size>=o&&a.push(e):r[u].size>o&&a.push(e);break;case c.s_range:for(f&&F.validateParamsCount(2,I,e),o=1024*F.getParamValue(e.params[0],"f",I.pattern.name,e.name)*1024,s=1024*F.getParamValue(e.params[1],"f",I.pattern.name,e.name)*1024,u=0;u<p;u++)F.isOut(e,0)?r[u].size<=o&&a.push(e):r[u].size<o&&a.push(e),F.isOut(e,1)?r[u].size>=s&&a.push(e):r[u].size>s&&a.push(e);break;case c.ext:for(f&&F.validateParamsCount(1,I,e),o=[],u=0,s=e.params.length;u<s;u++)o.push(e.params[u]);for(u=0,s=r.length;u<s;u++)spa.validation.isStringContainsOneOfArray(r[u].name,o)||a.push(e);break;case c.len:f&&F.validateParamsCount(1,I,e),p!==(o=F.getParamValue(e.params[0],"f",I.pattern.name,e.name))&&a.push(e);break;default:F.customRule(I,i)||a.push(e)}i++}return 0===a.length}},in:{set:function(e){M=e},validate:function(){F.applyPreRules(M);var e,a=M.pattern.invalidRules,t=M.pattern.rules.length,n=M.pattern.isLite,r=M.input.valueToValidate,i=void 0,o=void 0,s=void 0,u=!1,l=m.debug;if(!r){if(M.pattern.required){if(a.push(M.pattern.required),!n)for(i=0;i<t;i++)a.push(M.pattern.rules[i]);return!1}return!0}for(i=0;(!a.length||!n)&&i<t;){if(e=M.pattern.rules[i],e.type===c.items){for(l&&F.validateParamsCount(1,M,e),u=!0,o=[],s=e.params.length-1;0<=s;s--)o.push(e.params[s]);spa.validation.isStringIn(r,o,!0)||a.push(e)}else F.customRule(M,i)||a.push(e);i++}if(!u)throw spa.resource.get("ex.pmr",{p:M.pattern.name,r:"items"});return 0===a.length}},number:{set:function(e,a){R=e,j=a},validate:function(){F.applyPreRules(R);var e,a=R.pattern.invalidRules,t=R.pattern.rules.length,n=R.pattern.isLite,r=R.input.valueToValidate,i=void 0,o=void 0,s=void 0,u=void 0,l=m.debug;if(m.trimValues||(R.input.valueToValidate=p(r,!0),R.confirmInput&&(R.confirmInput.valueToValidate=p(R.confirmInput.valueToValidate,!0))),!r){if(R.pattern.required){if(a.push(R.pattern.required),!n)for(j?a.push(T("integer",void 0)):a.push(T("float",void 0)),i=0;i<t;i++)a.push(R.pattern.rules[i]);return!1}return!0}if(j){if(!spa.validation.isInteger(r)){if(a.push(T("integer",void 0)),!n)for(i=0;i<t;i++)a.push(R.pattern.rules[i]);return!1}u=parseInt(r)}else{if(!spa.validation.isFloat(r)){if(a.push(T("float",void 0)),!n)for(i=0;i<t;i++)a.push(R.pattern.rules[i]);return!1}u=parseFloat(r)}for(i=0;(!a.length||!n)&&i<t;){switch((e=R.pattern.rules[i]).type){case c.positive:u<0&&a.push(e);break;case c.negative:0<=u&&a.push(e);break;case c.min:l&&F.validateParamsCount(1,R,e),o=F.getParamValue(e.params[0],"f",R.pattern.name,e.name),F.isOut(e)?u<=o&&a.push(e):u<o&&a.push(e);break;case c.max:l&&F.validateParamsCount(1,R,e),o=F.getParamValue(e.params[0],"f",R.pattern.name,e.name),F.isOut(e)?o<=u&&a.push(e):o<u&&a.push(e);break;case c.range:l&&F.validateParamsCount(2,R,e),o=F.getParamValue(e.params[0],"f",R.pattern.name,e.name),s=F.getParamValue(e.params[1],"f",R.pattern.name,e.name),F.isOut(e,0)?u<=o&&a.push(e):u<o&&a.push(e),F.isOut(e,1)?s<=u&&a.push(e):s<u&&a.push(e);break;case c.not:for(l&&F.validateParamsCount(1,R,e),o=[],s=e.params.length-1;0<=s;s--)o.push(e.params[s]);spa.validation.isStringIn(r,o,!0)&&a.push(e);break;case c.confirmed:R.confirmInput&&R.confirmInput.valueToValidate===r||a.push(e);break;default:F.customRule(R,i)||a.push(e)}i++}return 0===a.length}},regex:{set:function(e){O=e},validate:function(){F.applyPreRules(O);var e,a,t=O.pattern.invalidRules,n=O.pattern.rules.length,r=O.pattern.isLite,i=O.input.valueToValidate,o=void 0,s=void 0,u=!1,l=m.debug;if(!i){if(O.pattern.required){if(t.push(O.pattern.required),!r)for(o=0;o<n;o++)t.push(O.pattern.rules[o]);return!1}return!0}for(o=0;(!t.length||!r)&&o<n;){switch((e=O.pattern.rules[o]).type){case c.pattern:l&&F.validateParamsCount(1,O,e),u=!0,spa.validation.isRegMatch(i,e.params[0])||t.push(e);break;case c.min:l&&F.validateParamsCount(1,O,e),s=F.getParamValue(e.params[0],"i",O.pattern.name,e.name),F.isOut(e)?i.length<=s&&t.push(e):i.length<s&&t.push(e);break;case c.max:l&&F.validateParamsCount(1,O,e),s=F.getParamValue(e.params[0],"i",O.pattern.name,e.name),F.isOut(e)?i.length>=s&&t.push(e):i.length>s&&t.push(e);break;case c.range:l&&F.validateParamsCount(2,O,e),s=F.getParamValue(e.params[0],"i",O.pattern.name,e.name),a=F.getParamValue(e.params[1],"i",O.pattern.name,e.name),F.isOut(e,0)?i.length<=s&&t.push(e):i.length<s&&t.push(e),F.isOut(e,1)?i.length>=a&&t.push(e):i.length>a&&t.push(e);break;case c.len:l&&F.validateParamsCount(1,O,e),s=F.getParamValue(e.params[0],"i",O.pattern.name,e.name),i.length!==s&&t.push(e);break;case c.confirmed:O.confirmInput&&O.confirmInput.valueToValidate===i||t.push(e);break;default:F.customRule(O,o)||t.push(e)}o++}if(!u)throw spa.resource.get("ex.pmr",{p:O.pattern.name,r:"pattern"});return 0===t.length}},string:{set:function(e){L=e},validate:function(){F.applyPreRules(L);var e,a=L.pattern.invalidRules,t=L.pattern.rules.length,n=L.pattern.isLite,r=L.input.valueToValidate,i=void 0,o=void 0,s=void 0,u=m.debug;if(!r){if(L.pattern.required){if(a.push(L.pattern.required),!n)for(i=0;i<t;i++)a.push(L.pattern.rules[i]);return!1}return!0}for(i=0;(!a.length||!n)&&i<t;){switch((e=L.pattern.rules[i]).type){case c.of:u&&F.validateParamsCount(1,L,e),spa.validation.isStringOf(r,e.params)||a.push(e);break;case c.not_of:u&&F.validateParamsCount(1,L,e),spa.validation.isStringContainsOneOfRegex(r,e.params)&&a.push(e);break;case c.min:u&&F.validateParamsCount(1,L,e),o=F.getParamValue(e.params[0],"i",L.pattern.name,e.name),F.isOut(e)?r.length<=o&&a.push(e):r.length<o&&a.push(e);break;case c.max:u&&F.validateParamsCount(1,L,e),o=F.getParamValue(e.params[0],"i",L.pattern.name,e.name),F.isOut(e)?r.length>=o&&a.push(e):r.length>o&&a.push(e);break;case c.range:u&&F.validateParamsCount(2,L,e),o=F.getParamValue(e.params[0],"i",L.pattern.name,e.name),s=F.getParamValue(e.params[1],"i",L.pattern.name,e.name),F.isOut(e,0)?r.length<=o&&a.push(e):r.length<o&&a.push(e),F.isOut(e,1)?r.length>=s&&a.push(e):r.length>s&&a.push(e);break;case c.len:u&&F.validateParamsCount(1,L,e),o=F.getParamValue(e.params[0],"i",L.pattern.name,e.name),r.length!==o&&a.push(e);break;case c.not:for(u&&F.validateParamsCount(1,L,e),o=[],s=e.params.length-1;0<=s;s--)o.push(e.params[s]);spa.validation.isStringIn(r,o,!0)&&a.push(e);break;case c.confirmed:L.confirmInput&&L.confirmInput.valueToValidate===r||a.push(e);break;default:F.customRule(L,i)||a.push(e)}i++}return 0===a.length}},timeline:{set:function(e){(q=e).pattern.timelineFormat||(q.pattern.timelineFormat=T("format",[m.timelineFormat]))},validate:function(){F.applyPreRules(q);var e,a=q.pattern.invalidRules,t=q.pattern.rules.length,n=q.pattern.isLite,r=q.input.valueToValidate,i=q.pattern.timelineFormat.params[0],o=void 0,s=void 0,u=void 0,l=m.debug;if(!r){if(q.pattern.required){if(a.push(q.pattern.required),!n)for(a.push(q.pattern.timelineFormat),o=0;o<t;o++)a.push(q.pattern.rules[o]);return!1}return!0}if(!(r=spa.validation.isTimeline(r,i))){if(a.push(q.pattern.timelineFormat),!n)for(o=0;o<t;o++)a.push(q.pattern.rules[o]);return!1}for(o=0;(!a.length||!n)&&o<t;){switch((e=q.pattern.rules[o]).type){case c.min:s=l?(F.validateParamsCount(1,q,e),F.getParamValue(e.params[0],"t",q.pattern.name,e.name,i)):e.params[0],F.isOut(e)?spa.validation.isTimelineAfter(r,s,i)||a.push(e):spa.validation.isTimelineAfterOrEqual(r,s,i)||a.push(e);break;case c.max:s=l?(F.validateParamsCount(1,q,e),F.getParamValue(e.params[0],"t",q.pattern.name,e.name,i)):e.params[0],F.isOut(e)?spa.validation.isTimelineBefore(r,s,i)||a.push(e):spa.validation.isTimelineBeforeOrEqual(r,s,i)||a.push(e);break;case c.range:u=l?(F.validateParamsCount(2,q,e),s=F.getParamValue(e.params[0],"t",q.pattern.name,e.name,i),F.getParamValue(e.params[1],"t",q.pattern.name,e.name,i)):(s=e.params[0],e.params[1]);var p="";p+=F.isOut(e,0)?"(":"[",p+=F.isOut(e,1)?")":"]",spa.validation.isTimelineBetween(r,s,u,i,p)||a.push(e);break;case c.confirmed:q.confirmInput&&q.confirmInput.valueToValidate===q.input.valueToValidate||a.push(e);break;default:F.customRule(q,o)||a.push(e)}o++}return 0===a.length}},url:{set:function(e){_=e},validate:function(){F.applyPreRules(_);var e,a=_.pattern.invalidRules,t=_.pattern.rules.length,n=_.pattern.isLite,r=_.input.valueToValidate,i=void 0,o=void 0,s=void 0,u=m.debug;if(!r){if(_.pattern.required){if(a.push(_.pattern.required),!n)for(a.push(T("url",void 0)),i=0;i<t;i++)a.push(_.pattern.rules[i]);return!1}return!0}if(!spa.validation.isUrl(r)){if(a.push(T("url",void 0)),!n)for(i=0;i<t;i++)a.push(_.pattern.rules[i]);return!1}for(i=0;(!a.length||!n)&&i<t;){switch((e=_.pattern.rules[i]).type){case c.min:u&&F.validateParamsCount(1,_,e),o=F.getParamValue(e.params[0],"i",_.pattern.name,e.name),F.isOut(e)?r.length<=o&&a.push(e):r.length<o&&a.push(e);break;case c.max:u&&F.validateParamsCount(1,_,e),o=F.getParamValue(e.params[0],"i",_.pattern.name,e.name),F.isOut(e)?r.length>=o&&a.push(e):r.length>o&&a.push(e);break;case c.range:u&&F.validateParamsCount(2,_,e),o=F.getParamValue(e.params[0],"i",_.pattern.name,e.name),s=F.getParamValue(e.params[1],"i",_.pattern.name,e.name),F.isOut(e,0)?r.length<=o&&a.push(e):r.length<o&&a.push(e),F.isOut(e,1)?r.length>=s&&a.push(e):r.length>s&&a.push(e);break;case c.in_domain:for(u&&F.validateParamsCount(1,_,e),o=[],s=e.params.length-1;0<=s;s--)o.push(e.params[s]);spa.validation.isStringContainsOneOfArray(r,o)||a.push(e);break;case c.not_in_domain:for(u&&F.validateParamsCount(1,_,e),o=[],s=e.params.length-1;0<=s;s--)o.push(e.params[s]);spa.validation.isStringContainsOneOfArray(r,o)&&a.push(e);break;case c.confirmed:_.confirmInput&&_.confirmInput.valueToValidate===r||a.push(e);break;default:F.customRule(_,i)||a.push(e)}i++}return 0===a.length}}};function N(e){for(var a="",t=!1,n=0,r=e.length;n<r;n++)switch(e[n]){case"alpha":a+="a-zA-Z";break;case"num":a+="0-9";break;case"underscore":a+="_";break;case"dash":t=!0;break;case"spaces":a+="\\s";break;case"dot":a+=".";break;case"comma":a+=",";break;default:throw spa.resource.get("ex.usst",{p:e[n]})}return t&&(a+="-"),a}return{dialogDefaults:{title:"",message:"",status:"",icon:"",input:"",closeOnConfirm:!(_=q=L=O=j=R=M=I=E=S=B=void 0),dialogClass:"",confirmBtn:{text:"",class:""},cancelBtn:{text:"",class:""}},patternTypes:d,ruleTypes:c,tags:h,cachingTags:r,setOptions:function(e){var a;$.extend(!0,m,e),e.dialogCurrentDriver&&u.setDialogCD(e.dialogCurrentDriver),e.flashCurrentDriver&&u.setFlashCD(e.flashCurrentDriver),e.validationCurrentDriver&&u.setValidationCD(e.validationCurrentDriver),!e.ajaxLaravelHeader||(a=$('meta[name="csrf-token"]')).length&&(m.ajaxHeader?m.ajaxHeader["X-CSRF-TOKEN"]=a.attr("content"):m.ajaxHeader={"X-CSRF-TOKEN":a.attr("content")}),e.btnLoadingCurrentDriver&&u.setBtnLoadingCD(e.btnLoadingCurrentDriver),b()},setDialogCD:u.setDialogCD,setValidationCD:u.setValidationCD,setFlashCD:u.setFlashCD,setBtnLoadingCD:u.setBtnLoadingCD,getLocale:function(){return m.locale},setLocale:function(e){m.locale=e.toLowerCase(),b()},isLocale:function(e){return m.locale===e.toLowerCase()},isDebug:function(){return m.debug},getTimelineFormat:function(){return m.timelineFormat},dialog:{message:function(e,a,t,n,r){u.dialog.message(e,a,t,n,r)},confirm:function(e,a,t,n,r,i){u.dialog.confirm(e,a,t,n,r,i)},prompt:function(e,a,t,n,r,i,o){u.dialog.prompt(e,a,t,n,r,i,o)},messageSuccess:function(e,a,t){u.dialog.message(e,a,"success","success",t)},messageError:function(e,a,t){u.dialog.message(e,a,"danger","danger",t)},confirmDelete:function(e,a,t){spa.dialog.confirm(a||spa.resource.get("delete.title"),t||spa.resource.get("delete.confirm"),"warning","warning",function(){e()})},flash:function(e,a,t,n,r,i){u.flash.flash(e,a,t,n,r,i)},flashSuccess:function(e,a,t,n,r){u.flash.flash(e,a,"success",t,n,r)},flashError:function(e,a,t,n,r){u.flash.flash(e,a,"danger",t,n,r)}},validation:{validate:C.validate,resetValidation:C.resetValidation,isValidInput:C.isValidInput,isInteger:function(e){return spa.validation.isRegMatch(e,/^[+-]?\d+$/)||spa.validation.isRegMatch(e,/^[+-]?[\u0660-\u0669]+$/)},isFloat:function(e){return spa.validation.isRegMatch(e,/^[+-]?([0-9]*[.])?[0-9]+$/)||spa.validation.isRegMatch(e,/^[+-]?([\u0660-\u0669]*[.])?[\u0660-\u0669]+$/)},isEmail:function(e){return spa.validation.isRegMatch(e,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},isUrl:function(e){return spa.validation.isRegMatch(e,/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(:\d+)?(\/[-a-z\d%@_.~+&:]*)*(\?[;&a-z\d%@_.,~+:=-]*)?(#[-a-z\d_]*)?$/i)},isPositiveNumber:function(e){return spa.validation.isRegMatch(e,/^[+]?([0-9]*[.])?[0-9]+$/)||spa.validation.isRegMatch(e,/^[+]?([\u0660-\u0669]*[.])?[\u0660-\u0669]+$/)},isNegativeNumber:function(e){return spa.validation.isRegMatch(e,/^[-]([0-9]*[.])?[0-9]+$/)||spa.validation.isRegMatch(e,/^[-]([\u0660-\u0669]*[.])?[\u0660-\u0669]+$/)},isStringOf:function(e,a){a="^["+(a=N(a))+"]+$";return spa.validation.isRegMatch(e,a)},isStringContainsOneOfRegex:function(e,a){a="["+(a=N(a))+"]+";return spa.validation.isRegMatch(e,a)},isStringContainsOneOfArray:function(e,a,t){t||(e=e.toLowerCase());for(var n=0,r=a.length;n<r;n++)if(0<=e.indexOf(t?a[n]:a[n].toLowerCase()))return!0;return!1},isStringIn:function(e,a,t){t||(e=e.toLowerCase());for(var n=0,r=a.length;n<r;n++)if(e===(t?a[n]:a[n].toLowerCase()))return!0;return!1},isTimeline:function(e,a){a=moment(e,a,!0);return!!a.isValid()&&a},isTimelineBeforeOrEqual:function(e,a,t){a=moment.isMoment(a)?a:moment(a,t,!0),t=moment.isMoment(e)?e:moment(e,t,!0);return a.isValid()&&t.isValid()&&!a.isBefore(t)},isTimelineAfterOrEqual:function(e,a,t){a=moment.isMoment(a)?a:moment(a,t,!0),t=moment.isMoment(e)?e:moment(e,t,!0);return a.isValid()&&t.isValid()&&!a.isAfter(t)},isTimelineBefore:function(e,a,t){a=moment.isMoment(a)?a:moment(a,t,!0),t=moment.isMoment(e)?e:moment(e,t,!0);return a.isValid()&&t.isValid()&&t.isBefore(a)},isTimelineAfter:function(e,a,t){a=moment.isMoment(a)?a:moment(a,t,!0),t=moment.isMoment(e)?e:moment(e,t,!0);return a.isValid()&&t.isValid()&&t.isAfter(a)},isTimelineBetween:function(e,a,t,n,r){e=moment.isMoment(e)?e:moment(e,n,!0),a=moment.isMoment(a)?a:moment(a,n,!0),n=moment.isMoment(t)?t:moment(t,n,!0);return e.isValid()&&a.isValid()&&n.isValid()&&e.isBetween(a,n,null,r||"[]")},isRegMatch:function(e,a){return new RegExp(a).test(e)},isFunction:function(e){return"function"==typeof e},isArray:function(e){return e&&e.constructor===Array}},ajax:{request:function(e,a,t,n,r,i,o){t={headers:m.ajaxHeader,type:e,url:a||spa.web.getUrl(),data:t,error:m.ajaxOnError};r&&(t.cache=!1,t.contentType=!1,t.processData=!1),i&&$.extend(t,i);t=$.ajax(t);return o&&(spa.dom.setLoadingButton(o),t.always(function(){spa.dom.unsetLoadingButton(o)})),t.done(n)},post:function(e,a,t,n){a={headers:m.ajaxHeader,type:"post",url:e||spa.web.getUrl(),data:a,error:m.ajaxOnError},a=$.ajax(a);return n&&(spa.dom.setLoadingButton(n),a.always(function(){spa.dom.unsetLoadingButton(n)})),a.done(t)},get:function(e,a,t,n){a={headers:m.ajaxHeader,type:"get",url:e||spa.web.getUrl(),data:a,error:m.ajaxOnError},a=$.ajax(a);return n&&(spa.dom.setLoadingButton(n),a.always(function(){spa.dom.unsetLoadingButton(n)})),a.done(t)},delete:function(e,a,t,n){a={headers:m.ajaxHeader,type:"delete",url:e||spa.web.getUrl(),data:a,error:m.ajaxOnError},a=$.ajax(a);return n&&(spa.dom.setLoadingButton(n),a.always(function(){spa.dom.unsetLoadingButton(n)})),a.done(t)},put:function(e,a,t,n){a={headers:m.ajaxHeader,type:"put",url:e||spa.web.getUrl(),data:a,error:m.ajaxOnError},a=$.ajax(a);return n&&(spa.dom.setLoadingButton(n),a.always(function(){spa.dom.unsetLoadingButton(n)})),a.done(t)},postBtn:function(e,a,t,n){return g(e).on("click",function(e){e.preventDefault(),spa.ajax.post(a,t,n,$(this))})},getBtn:function(e,a,t,n){return g(e).on("click",function(e){e.preventDefault(),spa.ajax.get(a,t,n,$(this))})},deleteBtn:function(e,a,t,n){return g(e).on("click",function(e){e.preventDefault(),spa.ajax.delete(a,t,n,$(this))})},putBtn:function(e,a,t,n){return g(e).on("click",function(e){e.preventDefault(),spa.ajax.put(a,t,n,$(this))})}},array:{insertLast:function(e,a){return e.push(a)},insertFirst:function(e,a){return e.unshift(a)},insertAt:function(e,a,t){return e.splice(a,0,t),e.length},removeLast:function(e){return e.pop()},removeFirst:function(e){return e.shift()},removeAt:function(e,a){var t=e[a];return e.splice(a,1),t},removeWhere:function(e,a){for(var t=e.length-1;0<=t;t--)if(!0===a(e[t],t))return spa.array.removeAt(e,t)},searchGetBool:function(e,a){for(var t=0,n=e.length;t<n;t++)if(!0===a(e[t],t))return!0;return!1},searchGetIndex:function(e,a){for(var t=0,n=e.length;t<n;t++)if(!0===a(e[t],t))return t;return-1},searchGetItem:function(e,a){for(var t=0,n=e.length;t<n;t++)if(!0===a(e[t],t))return e[t]},foreach:function(e,a){if(spa.validation.isArray(e))for(var t=0,n=e.length;t<n&&!1!==a(e[t],t);t++);else for(var r in e)if(e.hasOwnProperty(r)&&!1===a(e[r],r))break},foreachReversed:function(e,a){for(var t=e.length-1;0<=t&&!1!==a(e[t],t);t--);},toString:function(e){return"["+e.join(", ")+"]"},copy:function(e){return $.extend(!0,[],e)},filter:function(e,a){var t=[];if(a)for(var n=0,r=e.length;n<r;n++)!0===a(e[n],n)&&t.push(e[n]);else for(var i=0,o=e.length;i<o;i++)e[i]&&t.push(e[i]);return t},map:function(e,a){var t,n=[];if(a)for(var r=0,i=e.length;r<i;r++)(t=a(e[r],r))&&n.push(t);return n},wrap:function(e){return e?spa.validation.isArray(e)?e:[e]:[]}},dom:{click:function(e,a){return g(e).on("click",a)},getFriendlyName:function(e){e=e.attr(h.friendlyName);return void 0===e?spa.resource.get("validation.defaultFriendlyName"):e},setDisable:function(e,a){if((e=g(e)).length)return e.is(":input")?e.prop("disabled",a):a?e.addClass("disabled"):e.removeClass("disabled"),e},setLoadingButton:function(e){u.btnLoading.set(e)},unsetLoadingButton:function(e,a){u.btnLoading.unset(e,a)},addHtmlAttr:function(e,a){if(e.attr("id",a.id).addClass(a.class),a.attr)for(var t in a.attr)e.attr(t,a.attr[t]);return e}},form:{submitAjax:function(e,a,t,n){if(!(e=g(e)).length)throw spa.resource.get("ex.fnf");if(t&&!C.validate(e))return!1;var r=e.attr("action")||spa.web.getUrl();if("post"!==(e.attr("method")||"get").trim().toLowerCase())return spa.ajax.get(r,e.serialize(),n,a);if(e.find("input[type=file]").length){t=new FormData(e[0]);return spa.ajax.request("POST",r,t,n,!0,void 0,a)}return spa.ajax.post(r,e.serialize(),n,a)},submit:function(e,a,t){if(!(e=g(e)).length)throw spa.resource.get("ex.fnf");if(t&&!C.validate(e))return!1;spa.dom.setLoadingButton(a),e.submit()},registerNormalSubmitter:function(a,t,n){a=g(a),t=g(t),a.length&&t.length&&t.on("click",function(e){e.preventDefault(),spa.form.submit(a,t,n)})},registerAjaxSubmitter:function(a,t,n,r){a=g(a),t=g(t),a.length&&t.length&&t.on("click",function(e){e.preventDefault(),spa.form.submitAjax(a,t,n,r)})},getFormInputsAsObject:function(e){if(!(e=g(e)).length)throw spa.resource.get("ex.fnf");for(var a=e.serializeArray(),t={},n=0,r=a.length;n<r;n++){var i=a[n];t[i.name]?(spa.validation.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(p(i.value))):t[i.name]=p(i.value)}return t}},input:{getValue:function(e){if((e=g(e)).length)return p(e.val())},getFiles:function(e){if((e=g(e)).length)return e[0].files},setValue:function(e,a){return(e=g(e)).length?e.val(a).trigger("change"):e},select:{getSelectedOption:function(e){if((e=g(e)).length){e=e.find(":selected");if(e.length)return e}},getSelectedValue:function(e){return spa.input.getValue(e)},getSelectedText:function(e){e=spa.input.select.getSelectedOption(e);if(e)return p(e.text())},getSelectedIndex:function(e){return(e=g(e)).length?e.prop("selectedIndex"):-1},setSelectedIndex:function(e,a){if(0<=a&&(e=g(e)).length){a=e.find("option:nth-child("+(a+1)+")");if(a.length)return a.prop("selected",!0),e.trigger("change"),e}},setSelectedValue:function(e,a){return spa.input.setValue(e,a)},setFirstOptionSelected:function(e){if((e=g(e)).length){var a=e.find("option:first-child");if(a.length)return a.prop("selected",!0),e.trigger("change"),e}},clearOptions:function(e){if((e=g(e)).length)return e.empty().trigger("change")},addOptions:function(e,a,t,n){if((e=g(e)).length){var r=[];n&&r.push($("<option selected disabled value>"+n+"</option>"));for(var i=0,o=a.length;i<o;i++)r.push(spa.dom.addHtmlAttr($('<option value="'+a[i].value+'">'+a[i].text+"</option>"),a[i]));return t?e.empty().html(r):e.append(r),e.trigger("change")}},addOption:function(e,a,t){if((e=g(e)).length){a=spa.dom.addHtmlAttr($('<option value="'+a.value+'">'+a.text+"</option>"),a);return e.append(a),t&&a.prop("selected",!0),e.trigger("change")}}},checkable:{isChecked:function(e){if((e=g(e)).length)return e.is(":checked")},set:function(e,a){if((e=g(e)).length)return e.prop("checked",a).trigger("change")},getRadioGroupValue:function(e){return spa.input.getValue('input[name="'+e+'"]:checked')},getCheckboxGroupArray:function(e){var a=[],t=$('input[name="'+e+'"]:checked'),n=t.length;if(n)for(var r=0;r<n;r++)a.push(p($(t[r]).val()));return a}}},resource:{get:function(e,a){try{var t=i[e][m.locale]||i[e].def;return t&&a&&(t=spa.resource.replace(t,a)),t}catch(e){return}},set:function(e){var a=e.key;delete e.key;var t=void 0,t=i[a]||(i[a]={},i[a]);$.extend(t,e)},setArray:function(e){for(var a=0,t=e.length;a<t;a++)spa.resource.set(e[a])},replace:function(e,a){for(var t in a)e=e.replace(new RegExp(":"+t,"g"),a[t]);return e}},table:{addRows:function(e,a){if((e=g(e)).length){var t=[],n=void 0;if(spa.validation.isArray(a)){var r,i,o,s=0,u=a.length,l=void 0;if(!u)return;for(;s<u;s++){for(r=a[s],n=spa.dom.addHtmlAttr($("<tr>"),r),l=0,i=r.columns.length;l<i;l++)o=r.columns[l],n.append(spa.dom.addHtmlAttr($("<td>"),o).html(o.data));t.push(n[0])}}else{n=spa.dom.addHtmlAttr($("<tr>"),a);for(var p=0,f=a.columns.length;p<f;p++){var m=a.columns[p],m=spa.dom.addHtmlAttr($("<td>"),m).html(m.data);n.append(m)}t.push(n[0])}return $.fn.DataTable&&$.fn.DataTable.isDataTable(e)?(1<t.length?e.DataTable().rows.add(t):e.DataTable().row.add(t[0]),e.DataTable().columns.adjust().draw()):e.find("tbody").append(t),spa.table.updatePaginationTotal(t.length),1===t.length?t[0]:t}},removeRows:function(e,a){if(e=g(e),e.length&&(a=e.find("tbody").find(a)).length)return $.fn.DataTable&&$.fn.DataTable.isDataTable(e)?(1<a.length?e.DataTable().rows(a):e.DataTable().row(a)).remove().draw():a.remove(),spa.table.updatePaginationTotal(-a.length),a},removeChecked:function(e,a){if((e=g(e)).length){a=e.find('input[name="'+a+'"]:checked').closest("tr");if(a.length)return spa.table.removeRows(e,a)}},removeAll:function(e){if((e=g(e)).length){var a=e.find("tbody").find("tr");return $.fn.DataTable&&$.fn.DataTable.isDataTable(e)?e.DataTable().rows(a).remove().draw():a.remove(),spa.table.updatePaginationTotal(-a.length),a}},moveRows:function(e,a,t){t=spa.table.removeRows(e,t);if(t.length&&(a=g(a)).length)return $.fn.DataTable&&$.fn.DataTable.isDataTable(a)?(1<t.length?a.DataTable().rows:a.DataTable().row).add(t).draw():a.find("tbody").append(t),t},moveChecked:function(e,a,t){e=spa.table.removeChecked(e,t);if(e.length&&(a=g(a)).length)return $.fn.DataTable&&$.fn.DataTable.isDataTable(a)?(1<e.length?a.DataTable().rows:a.DataTable().row).add(e).draw():a.find("tbody").append(e),e.find(t).prop("checked",!1),e},count:function(e,a){if((e=g(e)).length)return $.fn.DataTable&&$.fn.DataTable.isDataTable(e)?(a?e.DataTable().rows(a):e.DataTable().data()).count():(a?e.find("tbody").find(a):e.find("tbody").find("tr")).length},updatePaginationTotal:function(e,a){if((a=a?g(a):$("#pagination").find(".total")).length){var t=0;try{t=parseInt(a.text())}catch(e){}e=t+e;return a.text(e),e}return-1}},util:{randomString:function(e,a,t,n){var r=void 0,i="";a||n||t?(t&&(r="abcdefghijklmnopqrstuvwxyz"),n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),a&&(r+="0123456789")):r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var o=0,s=r.length;o<e;++o)i+=r.charAt(Math.floor(Math.random()*s));return i},debounce:function(t,n){function e(){var e=this,a=arguments;clearTimeout(r),r=setTimeout(function(){r=null,n.apply(e,a)},t)}var r=void 0;return e.cancel=function(){clearTimeout(r),r=null},e},timer:function(e,a){return setInterval(a,e)},cancelTimer:function(e){clearInterval(e)},executeLater:function(e,a){return setTimeout(a,e)},cancelExecuteLater:function(e){clearTimeout(e)},getTimelineDiff:function(e,a,t){var n="";return e&&a&&(t=t||m.timelineFormat,e=spa.validation.isTimeline(e,t),t=spa.validation.isTimeline(a,t),e&&t&&(0<(t=t.diff(e))&&((t=(e=moment.duration(t)).years())&&(n+=t+" :year"),(t=e.months())&&(n&&(n+=" :and "),n+=t+" :month"),(t=e.days())&&(n&&(n+=" :and "),n+=t+" :day"),(t=e.hours())&&(n&&(n+=" :and "),n+=t+" :hour"),(e=e.minutes())&&(n&&(n+=" :and "),n+=e+" :minute")),n=n&&spa.resource.replace(n,{year:spa.resource.get("year"),month:spa.resource.get("month"),day:spa.resource.get("day"),hour:spa.resource.get("hour"),minute:spa.resource.get("minute"),and:spa.resource.get("and")}))),n},formatDate:function(e,a){return moment(e).format(a||spa.getTimelineFormat())},token:{addToObj:function(e){return e[m.tokenName]=m.tokenValue,e},addToForm:function(e){e.prepend('<input type="hidden" name="'+m.tokenName+'" value="'+m.tokenValue+'" />')}}},web:{reload:function(e){window.location.reload(e)},redirect:function(e){window.location.href=e},newTab:function(e){window.open(e,"_blank")},getUrl:function(e){return void 0===e&&(e=window.location.href),new URL(e,window.location.origin).href},pathHas:function(e,a){return-1!==(a=a||spa.web.getPathWithoutQueryString()).indexOf(e)},getUrlWithoutQueryString:function(e){return void 0===e&&(e=window.location.href),new URL(e,window.location.origin).origin},getPath:function(e){return void 0===e&&(e=window.location.href),(e=new URL(e,window.location.origin)).pathname+e.search},getPathWithoutQueryString:function(e){return void 0===e&&(e=window.location.href),new URL(e,window.location.origin).pathname},getQueryStringAsObject:function(e){void 0===e&&(e=window.location.href);var a={},t=!0,n=!1,r=void 0;try{for(var i=new URL(e,window.location.origin).searchParams[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var o=o.value;a[o[0]]=o[1]}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}return a},getQueryString:function(e,a){return void 0===a&&(a=window.location.href),a=new URL(a,window.location.origin),e?a.searchParams.get(e):a.search},updateQueryString:function(e,a){for(var t in void 0===a&&(a=window.location.href),a=new URL(a,window.location.origin),e)a.searchParams.set(t,e[t]);return a.href},removeQueryString:function(e,a){return void 0===a&&(a=window.location.href),a=new URL(a,window.location.origin),e?(a.searchParams.delete(e),a.href):a.origin},localize:function(e,a,t){if(void 0===e&&(e=window.location.href),a=a||m.locale,"2"!=(t=t||m.localeMethod))return"1"==t?e:spa.web.updateQueryString(_defineProperty({},m.localeQueryKey,a),e);t=spa.web.urlSegments(1,e);return e=new URL(e,window.location.origin),2===t.length?e.pathname=e.pathname.replace("/"+t,a===m.defaultLocale?"":a):a!==m.defaultLocale&&(e.pathname="/"+a+e.pathname),e.href},urlSegments:function(e,a){void 0===a&&(a=window.location.href),a=new URL(a,window.location.origin);a=spa.array.filter(a.pathname.split("/"));return e?a[e-1]:a}},init:{datepicker:function(e,a){var t;(e=g(e)).length&&(t=m.datepickerOptions[m.locale],a&&(t=$.extend({},t,a)),e.datepicker(t))},datepickerOnChange:function(e,n){return g(e).each(function(e,a){var t=(a=$(a)).val();a.on("change",function(){var e=a.val();e!==t&&n(a,t=e)})})},select2:function(e,a){var t;(e=g(e)).length&&(t=void 0,t="ar"===m.locale?{dir:"rtl",language:m.select2Ar}:{dir:"ltr"},a&&(t=$.extend({},t,a)),e.select2(t))},dataTable:function(e,a){var t;(e=g(e)).length&&(t=m.datatableOptions[m.locale],a&&(t=$.extend({},t,a)),e.DataTable(t))},createCounter:function(a,t,n){a=g(a),t=g(t),a.length&&t.length&&(a.on("keyup",function(){var e=a.val().length,e=n-e;e<0&&a.val(a.val().substring(0,n)),t.html(e<0?0:e)}),a.trigger("keyup"))},autoComplete:function(e,a,t,n){(e=g(e)).length&&(a={ajax:{url:a,dataType:"json",data:function(e){return t?$.extend({},t,{search:e.term}):{search:e.term}},processResults:function(e){var a=[];return spa.array.foreach(e,function(e){a.push({id:e.value,text:e.text})}),{results:a}},delay:250},minimumInputLength:2},n&&(a=$.extend({},a,n)),spa.init.select2(e,a))},showMsg:function(e,a,t){t?(t=g(t)).length&&t.on("click",e,function(e){e.preventDefault(),spa.dialog.message("",$(this).attr(a))}):(e=g(e)).length&&e.on("click",function(e){e.preventDefault(),spa.dialog.message("",$(this).attr(a))})},deleteAndRedirect:function(a,t,n,r,i){(a=g(a)).length&&a.on("click",function(e){e.preventDefault(),spa.dialog.confirm(r||spa.resource.get("delete.title"),i||spa.resource.get("delete.confirm"),"warning","warning",function(){spa.ajax.delete(t,null,function(e){spa.dialog.messageSuccess("",e.message,function(){spa.web.redirect(n)})},a)})})},listDelete:function(e,n,r,i,o,s){g(i).on("click",e,function(e){e.preventDefault();var a=$(this),t=r.replace(":id",a.attr(n));spa.dialog.confirm(o||spa.resource.get("delete.title"),s||spa.resource.get("delete.confirm"),"warning","warning",function(){spa.ajax.delete(t,null,function(e){spa.dialog.messageSuccess("",e.message,function(){spa.table.removeRows(i,a.closest("tr"))})},a)})})}}}}();