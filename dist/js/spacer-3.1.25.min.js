"use strict";function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var spa=function(){var s,e=["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],a=["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],t=["أح","اث","ث","أر","خ","ج","س"],n=["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","أب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],h={integer:1,float:2,string:3,timeline:4,email:5,url:6,in:7,check:8,file:9,regex:10},c={required:1,positive:2,negative:3,min:4,max:5,range:6,not:7,confirmed:8,of:9,not_of:10,len:11,format:12,in_domain:13,not_in_domain:14,items:15,ext:16,pattern:17,s_min:18,s_max:19,s_range:20,lite:21,pre:22},o={validationTag:"data-v-p",friendlyName:"data-v-fn",cachedValidationEntry:"_spa-cve",confirmInput:"_spa-ci",isEventAttached:"_spa-iea",needValidation:"_spa-nv",timer:"_spa-t",loadingHtml:"_spa-original-html"},r="_spa-cve _spa-ci _spa-iea _spa-nv _spa-t",d={locale:"en",debug:!1,timelineFormat:"D-M-YYYY",trimValues:!0,ajaxOnError:function(e){spa.dialog.messageError(spa.resource.get("ajax.errorTitle"),spa.resource.get("ajax.errorBody")+e.status)},ajaxLaravelHeader:!1,ajaxHeader:void 0,tokenValue:void 0,tokenName:void 0,dialogCurrentDriver:"alert",dialogDrivers:{alert:{message:function(e,a,t,n,r){window.alert(e+"\n"+a),r&&r()},confirm:function(e,a,t,n,r,i){window.confirm(e+"\n"+a)?r():i&&i()},prompt:function(e,a,t,n,r,i){var o=window.prompt(e+"\n"+a);null===o?i&&i():r(o)}},sweetAlert:function(){function o(e){return"danger"===e?"error":e}return{message:function(e,a,t,n,r){swal({title:e,text:a,icon:o(n),button:spa.resource.get("btn.ok")}).then(function(){r&&r()})},confirm:function(e,a,t,n,r,i){swal({title:e,text:a,icon:o(n),dangerMode:!0,buttons:[spa.resource.get("btn.no"),spa.resource.get("btn.yes")]}).then(function(e){e?r():i&&i()})},prompt:function(e,a,t,n,r,i){swal({title:e,text:a,icon:o(n),content:"input",buttons:[spa.resource.get("btn.cancel"),spa.resource.get("btn.continue")]}).then(function(e){null===e?i&&i():r(e)})}}}()},flashCurrentDriver:"",flashDrivers:{},validationCurrentDriver:"dialog",validationDrivers:{silent:{onError:function(){},clearError:function(){}},listOfErrors:(s=[],{onError:function(e){for(var a=0,t=e.pattern.invalidRules.length;a<t;a++)s.push({msg:e.pattern.invalidRules[a].message,input:e.input});var n=$(d.listOfErrorsSelector);if(n.length){for(var r="",i=0,o=s.length;i<o;i++)r+="<li>"+s[i].msg+"</li>";n.html(r)}},clearError:function(e){for(var a=s.length-1;0<=a;a--)s[a].input.jquery[0]===e[0]&&s.splice(a,1);var t=$(d.listOfErrorsSelector);if(t.length){for(var n="",r=s.length,i=0;i<r;i++)n+="<li>"+s[i].msg+"</li>";t.html(n)}},getErrorList:function(){for(var e=[],a=0,t=s.length;a<t;a++){for(var n=s[a],r=-1,i=0,o=e.length;i<o;i++)if(e[i].input.jquery[0]===n.input.jquery[0]){r=i;break}-1===r?e.push({input:n.input,errors:[n.msg]}):e[r].errors.push(n.msg)}return e}})},reValidationDelay:500,listOfErrorsSelector:"#spacer-listOfErrors",validationCustomRules:{min_input:{validate:function(e,a){var t=e.input.valueToValidate,n=e.pattern.rules[a],r=e.input.jquery.closest("form").find('input[name="'+n.params[0]+'"]'),i=e.pattern.timelineFormat.params[0];if(r.length){var o=r.val();if(o){var s="o"===n.params[1];switch(e.pattern.type){case h.integer:case h.float:var u=parseFloat(t);if(o=parseFloat(o),isNaN(o))return!1;if(s){if(u<=o)return!1}else if(u<o)return!1;break;case h.timeline:if(s){if(!spa.validation.isTimelineAfter(t,o,i))return!1}else if(!spa.validation.isTimelineAfterOrEqual(t,o,i))return!1}}}return!0},getErrorMessage:function(e,a){var t=e.pattern.invalidRules[a],n="min"+("o"===t.params[1]?"_o":"_i"),r=t.params[2],i=void 0;return r||(r=(i=e.input.jquery.closest("form").find('input[name="'+t.params[0]+'"]')).attr(o.friendlyName)),r||(r=i.val()),spa.resource.get(e.pattern.name+"."+n,{fn:e.input.friendlyName,p1:r})}},max_input:{validate:function(e,a){var t=e.input.valueToValidate,n=e.pattern.rules[a],r=e.input.jquery.closest("form").find('input[name="'+n.params[0]+'"]'),i=e.pattern.timelineFormat.params[0];if(r.length){var o=r.val();if(o){var s="o"===n.params[1];switch(e.pattern.type){case h.integer:case h.float:var u=parseFloat(t);if(o=parseFloat(o),isNaN(o))return!1;if(s){if(o<=u)return!1}else if(o<u)return!1;break;case h.timeline:if(s){if(!spa.validation.isTimelineBefore(t,o,i))return!1}else if(!spa.validation.isTimelineBeforeOrEqual(t,o,i))return!1}}}return!0},getErrorMessage:function(e,a){var t=e.pattern.invalidRules[a],n="max"+("o"===t.params[1]?"_o":"_i"),r=t.params[2],i=void 0;return r||(r=(i=e.input.jquery.closest("form").find('input[name="'+t.params[0]+'"]')).attr(o.friendlyName)),r||(r=i.val()),spa.resource.get(e.pattern.name+"."+n,{fn:e.input.friendlyName,p1:r})}}},validationPre:void 0,validationIsLite:!1,momentLocales:{ar:{months:n,monthsShort:["كانون 2","شباط","آذار","نيسان","أيار","حزيران","تموز","أب","أيلول","تشرين 1","تشرين 2","كانون 1"],weekdays:e,weekdaysShort:a,weekdaysMin:t,weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}}},datepickerOptions:{ar:{closeText:"إغلاق",prevText:"&#x3C;السابق",nextText:"التالي&#x3E;",currentText:"اليوم",monthNames:n,monthNamesShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayNames:e,dayNamesShort:a,dayNamesMin:t,weekHeader:"أسبوع",firstDay:1,isRTL:!0,showMonthAfterYear:!1,yearSuffix:"",dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,showButtonPanel:!0},en:{dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,showButtonPanel:!0}},datatableOptions:{ar:{paging:!1,info:!1,searching:!1,order:[],language:{decimal:"",emptyTable:"لا توجد بيانات",info:"عرض _START_ إلى _END_. الاجمالي _TOTAL_ عنصر",infoEmpty:"لا توجد بيانات",infoFiltered:"(filtered from _MAX_ total entries)",infoPostFix:"",thousands:",",lengthMenu:"عدد المداخل في كل صفحة  _MENU_",loadingRecords:"جاري التحميل...",processing:"جاري المعالجة...",search:"فلترة: ",zeroRecords:"لا توجد بيانات مطابقة",paginate:{first:"البداية",last:"النهاية",next:"التالي",previous:"السابق"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}}},en:{paging:!1,info:!1,searching:!1,order:[]}},localeMethod:2,localeQueryKey:"lang",defaultLocale:"en",btnLoadingCurrentDriver:"spin",btnLoadingDrivers:{spin:function(){function t(e,a){if((e=m(e)).length)return e.html(a||e.data(o.loadingHtml)),spa.dom.setDisable(e,!1),e.css("min-width","auto"),e}return{set:function(e,a){if((e=m(e)).length)return e.data(o.loadingHtml,e.html()),e.css("min-width",e.css("width")),e.html(spa.resource.get("icon.loading")),spa.dom.setDisable(e,!0),a&&a.always(function(){t(e)}),e},unset:t}}()}},i={"btn.ok":{en:"Ok",ar:"موافق"},"btn.cancel":{en:"Cancel",ar:"الغاء"},"btn.continue":{en:"Continue",ar:"المتابعة"},"btn.yes":{en:"Yes",ar:"نعم"},"btn.no":{en:"No",ar:"لا"},"ajax.errorTitle":{en:"Request Error",ar:"فشل الطلب"},"ajax.errorBody":{en:"The request has been failed with error code: ",ar:"حدث خطأ في الطلب. رقم الخطأ: "},"validation.errorTitle":{en:"Validation Error",ar:"خطأ في البيانات"},"validation.defaultFriendlyName":{en:"value",ar:"المدخل"},"delete.title":{en:"Delete Item",ar:"حذف العنصر"},"delete.confirm":{en:"Item to be deleted. Continue?",ar:"سيتم حذف العنصر. المتابعة؟"},"integer.integer":{en:"The :fn must be an integer number",ar:"يجب أن يكون :fn رقم صحيح"},"integer.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"integer.positive":{en:"The :fn must be positive number",ar:"يجب أن يكون :fn رقم موجب"},"integer.negative":{en:"The :fn must be negative number",ar:"يجب أن يكون :fn رقم سالب"},"integer.min_i":{en:"The :fn must be greater than or equal :p1",ar:" يجب أن يكون :fn :p1 على الأقل"},"integer.min_o":{en:"The :fn must be greater than :p1",ar:" يجب أن يكون :fn أكبر من :p1"},"integer.max_i":{en:"The :fn must be less than or equal :p1",ar:"يجب أن يكون :fn :p1 على الأكثر"},"integer.max_o":{en:"The :fn must be less than :p1",ar:"يجب أن يكون :fn أقل من :p1"},"integer.range":{en:"The :fn must be between :p1 and :p2",ar:"يجب أن يكون :fn بين :p1 و :p2"},"integer.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"integer.not":{en:"The :fn is invalid",ar:":fn غير صالح"},"float.float":{en:"The :fn must be a float number",ar:"يجب أن يكون :fn رقم صحيح"},"float.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"float.positive":{en:"The :fn must be positive number",ar:"يجب أن يكون :fn رقم صحيح موجب"},"float.negative":{en:"The :fn must be negative number",ar:"يجب أن يكون :fn رقم صحيح سالب"},"float.min_i":{en:"The :fn must be greater than or equal :p1",ar:" يجب أن يكون :fn :p1 على الأقل"},"float.min_o":{en:"The :fn must be greater than :p1",ar:" يجب أن يكون :fn أكبر من :p1"},"float.max_i":{en:"The :fn must be less than or equal :p1",ar:"يجب أن يكون :fn :p1 على الأكثر"},"float.max_o":{en:"The :fn must be less than :p1",ar:"يجب أن يكون :fn أقل من :p1"},"float.range":{en:"The :fn must be between :p1 and :p2",ar:"يجب أن يكون :fn بين :p1 و :p2"},"float.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"float.not":{en:"The :fn is invalid",ar:":fn غير صالح"},"string.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"string.of":{en:"The :fn contains unacceptable character(s)",ar:":fn يحوي رموز غير صالحة"},"string.not_of":{en:"The :fn contains unacceptable character(s)",ar:":fn يحوي رموز غير صالحة"},"string.min_i":{en:"The :fn must be :p1 character(s) at least",ar:"يجب أن يكون :fn بطول :p1 محرف على الأقل"},"string.min_o":{en:"The :fn must be more than :p1 character(s)",ar:"يجب أن يكون :fn أكثر من :p1 محرف"},"string.max_i":{en:"The :fn may not contain more than :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف على الأكثر"},"string.max_o":{en:"The :fn must be less than :p1 character(s)",ar:"يجب أن يكون :fn أقل من :p1 محرف"},"string.range":{en:"The :fn must be between :p1 and :p2 character(s)",ar:"يجب أن يكون :fn بطول :p1 إلى :p2 محرف"},"string.len":{en:"The :fn must be :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف"},"string.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"string.not":{en:"The :fn is invalid",ar:":fn غير صالح"},"check.required":{en:"Please choose :fn",ar:"يرجى اختيار :fn"},"timeline.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"timeline.format":{en:"The :fn is not in the correct format: :p1",ar:":fn ليس بالتنسيق المطلوب: :p1"},"timeline.min_i":{en:"The :fn must be a date after or equal :p1",ar:" يجب أن يكون :fn أكبر من أو يساوي :p1"},"timeline.min_o":{en:"The :fn must be a date after :p1",ar:" يجب أن يكون :fn أكبر من :p1"},"timeline.max_i":{en:"The :fn must be a date before or equal :p1",ar:" يجب أن يكون :fn أصغر من أو يساوي :p1"},"timeline.max_o":{en:"The :fn must be a date before :p1",ar:" يجب أن يكون :fn أصغر من :p1"},"timeline.range":{en:"The :fn must be between :p1 and :p2",ar:"يجب أن يكون :fn بين :p1 و :p2"},"timeline.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"email.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"email.email":{en:"The :fn must be a valid email address",ar:":fn غير صالح"},"email.min_i":{en:"The :fn must be :p1 character(s) at least",ar:"يجب أن يكون :fn بطول :p1 محرف على الأقل"},"email.min_o":{en:"The :fn must be more than :p1 character(s)",ar:"يجب أن يكون :fn أكثر من :p1 محرف"},"email.max_i":{en:"The :fn may not contain more than :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف على الأكثر"},"email.max_o":{en:"The :fn must be less than :p1 character(s)",ar:"يجب أن يكون :fn أقل من :p1 محرف"},"email.range":{en:"The :fn must be between :p1 and :p2 character(s)",ar:"يجب أن يكون :fn بطول :p1 إلى :p2 محرف"},"email.in_domain":{en:"The :fn must be in these domains: :p1",ar:"يجب أن يكون :fn ضمن النطاقات التالية: :p1"},"email.not_in_domain":{en:"The :fn may not be in these domains: :p1",ar:"يجب أن يكون :fn خارج النطاقات التالية: :p1"},"email.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"url.url":{en:"The :fn must be a valid url",ar:":fn غير صالح"},"url.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"url.min_i":{en:"The :fn must be :p1 character(s) at least",ar:"يجب أن يكون :fn بطول :p1 محرف على الأقل"},"url.min_o":{en:"The :fn must be more than :p1 character(s)",ar:"يجب أن يكون :fn أكثر من :p1 محرف"},"url.max_i":{en:"The :fn may not contain more than :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف على الأكثر"},"url.max_o":{en:"The :fn must be less than :p1 character(s)",ar:"يجب أن يكون :fn أقل من :p1 محرف"},"url.range":{en:"The :fn must be between :p1 and :p2 character(s)",ar:"يجب أن يكون :fn بطول :p1 إلى :p2 محرف"},"url.in_domain":{en:"The :fn must be in these domains: :p1",ar:"يجب أن يكون :fn ضمن النطاقات التالية: :p1"},"url.not_in_domain":{en:"The :fn may not be in these domains: :p1",ar:"يجب أن يكون :fn خارج النطاقات التالية: :p1"},"url.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"in.items":{en:"The :fn is invalid",ar:":fn غير صالح"},"in.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"file.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"file.min_i":{en:"The :fn must be at least :p1MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn :p1MB على الأقل"},"file.min_o":{en:"The :fn must be larger than :p1MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn أكبر من :p1MB"},"file.max_i":{en:"The :fn may not be greater than :p1MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn :p1MB على الأكثر"},"file.max_o":{en:"The :fn may not be greater than :p1MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn أقل من :p1MB"},"file.range":{en:"The :fn must be between :p1MB and :p2MB in total",ar:"يجب أن يكون اجمالي حجم الملفات في :fn من :p1MB إلى :p2MB"},"file.s_min_i":{en:"Each file in :fn must be at least :p1MB in total",ar:"يجب أن يكون حجم الملف الواحد في :fn :p1MB على الأقل"},"file.s_min_o":{en:"Each file in :fn must be larger than :p1MB in total",ar:"يجب أن يكون حجم الملف الواحد في :fn أكبر من :p1MB"},"file.s_max_i":{en:"Each file in :fn may not be greater than :p1MB in total",ar:"يجب أن يكون حجم الملف الواحد في :fn :p1MB على الأكثر"},"file.s_max_o":{en:"The :fn may not be greater than :p1MB in total",ar:"يجب أن يكون حجم الملف الواحد في :fn أقل من :p1MB"},"file.s_range":{en:"Each file in :fn must be between :p1MB and :p2MB",ar:"يجب أن يكون حجم الملف الواحد في :fn من :p1MB إلى :p2MB"},"file.ext":{en:"The :fn file(s) must be one of these formats: :p1",ar:"يجب أن تكون كل الملفات في :fn بأحد الصيغ التالية: :p1"},"file.len":{en:"The :fn may have :p1 file(s)",ar:"يجب أن يحوي :fn على :p1 ملف (ملفات)"},"regex.required":{en:"The :fn is required",ar:"لا يجوز ترك :fn فارغ"},"regex.pattern":{en:"The :fn is not valid",ar:":fn غير صالح"},"regex.min_i":{en:"The :fn must be :p1 character(s) at least",ar:"يجب أن يكون :fn بطول :p1 محرف على الأقل"},"regex.min_o":{en:"The :fn must be more than :p1 character(s)",ar:"يجب أن يكون :fn أكثر من :p1 محرف"},"regex.max_i":{en:"The :fn may not contain more than :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف على الأكثر"},"regex.max_o":{en:"The :fn must be less than :p1 character(s)",ar:"يجب أن يكون :fn أقل من :p1 محرف"},"regex.range":{en:"The :fn must be between :p1 and :p2 character(s)",ar:"يجب أن يكون :fn بطول :p1 إلى :p2 محرف"},"regex.len":{en:"The :fn must be :p1 character(s)",ar:"يجب أن يكون :fn بطول :p1 محرف"},"regex.confirmed":{en:"The :fn confirmation does not match",ar:"تأكيد :fn غير مطابق"},"icon.loading":{def:'<i class="fa fa-spinner fa-spin fa-fw"></i>'},"icon.success":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-check fa-stack-1x"></i></span>'},"icon.danger":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-times fa-stack-1x"></i></span>'},"icon.warning":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-exclamation fa-stack-1x"></i></span>'},"icon.info":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-info fa-stack-1x"></i></span>'},"icon.question":{def:'<span class="fa-stack fa-lg"><i class="fa fa-circle-thin fa-stack-2x"></i><i class="fa fa-question fa-stack-1x"></i></span>'},"ex.usst":{def:"Spacer Error: Unsupported string type: :p"},"ex.pmr":{def:"Spacer Error: The validation pattern :p misses a required rule: :r"},"ex.usp":{def:"Spacer Error: Unsupported pattern: :p"},"ex.se":{def:"Spacer Error: Syntax error: :p"},"ex.inf":{def:"Spacer Error: Invalid parameter for :p.:r rule: input with name :n not found"},"ex.ipc":{def:"Spacer Error: The validation rule :p.:r misses some parameters"},"ex.ipt":{def:"Spacer Error: Invalid parameter for :p.:r rule: :a"},"ex.pfnf":{def:"Spacer Error: pre function not found: :p"},"ex.rnf":{def:"Spacer Error: No such a rule: :p.:r"},"ex.mnf":{def:"Spacer Error: Error message not found for :p.:r"},"ex.ddnf":{def:"Spacer Error: Dialog driver :p or one of its functions not found"},"ex.vdnf":{def:"Spacer Error: Validation driver :p or one of its functions not found"},"ex.fdnf":{def:"Spacer Error: Flash driver :p or one of its functions not found"},"ex.bldnf":{def:"Spacer Error: Button loading driver :p or one of its functions not found"},"ex.fnf":{def:"Spacer Error: Form not found"},year:{en:"year",ar:"سنة"},month:{en:"month",ar:"شهر"},day:{en:"day",ar:"يوم"},hour:{en:"hour",ar:"ساعة"},minute:{en:"minute",ar:"دقيقة"},and:{en:"and",ar:"و"}};function m(e){return e instanceof $?e:$(e)}function p(e,a){return d.trimValues||a?e?e.trim():"":e||""}var l=function(){function t(e){var a=d.dialogDrivers[e];if(d.debug&&!(a&&a.message&&a.confirm&&a.prompt))throw spa.resource.get("ex.ddnf",{p:e});return a}function n(e){var a=d.flashDrivers[e];if(d.debug&&(!a||!a.flash))throw spa.resource.get("ex.fdnf",{p:e});return a}function a(e){var a=e.split(".");l.validationIsDialog="dialog"===a[0],l.validationIsFlash=!l.validationIsDialog&&"flash"===a[0],l.validationIsDialogOrFlashDriver=l.validationIsDialog||l.validationIsFlash,l.validationIsDialogOrFlashDriver?1===a.length?l.validation=l.validationIsDialog?d.dialogDrivers[d.dialogCurrentDriver]:d.flashDrivers[d.flashCurrentDriver]:l.validationIsDialog?l.validation=t(a[1]):l.validation=n(a[1]):l.validation=function(e){var a=d.validationDrivers[e];if(d.debug&&!(a&&a.onError&&a.clearError))throw spa.resource.get("ex.vdnf",{p:e});return a}(a[0]),d.validationCurrentDriver=e}return{setDialogCD:function(e){l.dialog=t(e),d.dialogCurrentDriver=e,l.validationIsDialog&&a(d.validationCurrentDriver)},setFlashCD:function(e){l.flash=n(e),d.flashCurrentDriver=e,l.validationIsFlash&&a(d.validationCurrentDriver)},setValidationCD:a,setBtnLoadingCD:function(e){l.btnLoading=function(e){var a=d.btnLoadingDrivers[e];if(d.debug&&!(a&&a.set&&a.unset))throw spa.resource.get("ex.bldnf",{p:e});return a}(e),d.btnLoadingCurrentDriver=e},dialog:void 0,flash:void 0,validation:void 0,btnLoading:void 0,validationIsDialog:!1,validationIsFlash:!1,validationIsDialogOrFlashDriver:!1}}();function f(e){return e.find("input, textarea, select").not(":input[type=button], :input[type=submit], :input[type=reset]")}function u(){if(window.moment){var e=d.locale;if("en"===e)moment.locale("en");else if(moment.locale(e)!==e)d.momentLocales[d.locale]&&moment.locale(e,d.momentLocales[d.locale])}}function g(e){return{jquery:e,name:e.attr("name"),friendlyName:spa.dom.getFriendlyName(e),originalValue:"",valueToValidate:""}}function v(e,a){return{params:a,type:c[e],name:e,message:void 0}}function b(e,a){return{input:g(e),confirmInput:void 0,pattern:(t=a,{string:t,type:-1,name:void 0,rules:[],isLite:d.validationIsLite,timelineFormat:void 0,required:void 0,pre:[],invalidRules:[]})};var t}l.setDialogCD(d.dialogCurrentDriver),l.setValidationCD(d.validationCurrentDriver),l.setBtnLoadingCD(d.btnLoadingCurrentDriver);var T,y,x,w,D,k,C,V,P,_,q=function(){function p(e,a,t){return e.data("v-"+a+"-"+t+"-"+d.locale)||e.data("v-"+a+"-"+t)||spa.resource.get(a+"."+t)}function f(e,a){var t=e.pattern.invalidRules[a];if(d.debug&&!(d.validationCustomRules&&d.validationCustomRules[t.name]&&spa.validation.isFunction(d.validationCustomRules[t.name].getErrorMessage)))throw spa.resource.get("ex.mnf",{p:e.pattern.name,r:t.name});return d.validationCustomRules[t.name].getErrorMessage(e,a)}return{populateErrorMessages:function(e){for(var a=void 0,t=void 0,n=void 0,r=0,i=e.pattern.invalidRules.length;r<i;r++){switch(n=!0,(a=e.pattern.invalidRules[r]).type){case c.min:case c.max:var o=a.name+(R.isOut(a)?"_o":"_i");t=p(e.input.jquery,e.pattern.name,o),t=spa.resource.replace(t,{fn:e.input.friendlyName});break;case c.in_domain:case c.not_in_domain:case c.ext:for(var s="",u=0,l=a.params.length;u<l-1;u++)s+=a.params[u]+", ";s+=a.params[u],t=p(e.input.jquery,e.pattern.name,a.name),t=spa.resource.replace(t,{fn:e.input.friendlyName,p1:s}),n=!1;break;default:(t=p(e.input.jquery,e.pattern.name,a.name))&&(t=spa.resource.replace(t,{fn:e.input.friendlyName}))}t?n&&(t=t.replace(/:p[1-9]/g,function(e){return a.params[parseInt(e[2])-1]})):t=f(e,r),a.message=t}},clearErrorProxy:function(e){l.validationIsDialogOrFlashDriver||l.validation.clearError(e)},onErrorProxy:function(e){if(l.validationIsDialogOrFlashDriver){var a=spa.resource.get("validation.errorTitle"),t=e.pattern.invalidRules[0].message;l.validationIsDialog?l.validation.message(a,t,"danger","danger"):l.validation.flash(a,t,"danger"),e.input.jquery.focus()}else l.validation.onError(e)}}}(),O=function(){function d(e,a){switch(a.type){case c.lite:e.pattern.isLite=!0;break;case c.pre:e.pattern.pre=a.params;break;case c.required:e.pattern.required=a;break;case c.format:e.pattern.timelineFormat=a;break;case c.confirmed:!function(e,a){var t=void 0;t=a.length?a[0]:e.input.name+"_confirmation";var n=e.input.jquery.closest("form").find('input[name="'+t+'"]');n.length&&(e.confirmInput=g(n),e.input.jquery.data(o.confirmInput,n))}(e,a.params),e.pattern.rules.push(a);break;default:e.pattern.rules.push(a)}}function m(e){var a=[];if(!e)return a;for(var t=e.split(","),n=0,r=t.length;n<r;n++){var i=t[n].trim();if(""===i)throw spa.resource.get("ex.se",{p:e});a.push(i)}return a}return{parse:function(e){var a,t,n=e.data(o.cachedValidationEntry);if(!n){var r=e.attr(o.validationTag);if(r&&(r=r.trim()),!r)return;!function(e){var a=e.pattern.string,t=a.match(/^\s*([A-Za-z]+)\s*(?:\[\s*(.*)]\s*)?$/);if(!t)throw spa.resource.get("ex.se",{p:a});e.pattern.name=t[1].toLowerCase(),e.pattern.type=h[e.pattern.name];var n=t[2];if(n){var r=n.match(/~[^~.]+~/g);if(r)for(var i=0,o=r.length;i<o;i++)n=n.replace(r[i],"r");for(var s=n.split("|"),u=0,l=s.length;u<l;u++){var p=s[u].match(/^\s*([a-zA-Z_]+)\s*(?::\s*(.+))?$/);if(!p)throw spa.resource.get("ex.rnf",{p:e.pattern.name,r:s[u]});var f=p[1],c=void 0;if("pattern"===f||"format"===f){if(!r||!r.length)throw spa.resource.get("ex.ipc",{p:e.pattern.name,r:f});c=r.shift().match(/~([^~.]+)~/)[1]}else c=p[2];d(e,v(f.toLowerCase(),m(c)))}}}(n=b(e,r))}return(a=n).pattern.type===h.file?a.input.originalValue=a.input.jquery[0].files:a.pattern.type===h.check?a.input.jquery.is(":checked")?a.input.originalValue=p(a.input.jquery.val())||"true":a.input.originalValue="":(a.input.originalValue=p(a.input.jquery.val()),a.confirmInput&&(a.confirmInput.originalValue=p(a.confirmInput.jquery.val()))),a.input.valueToValidate=a.input.originalValue,a.confirmInput&&(a.confirmInput.valueToValidate=a.confirmInput.originalValue),(t=n).input.jquery.data(o.cachedValidationEntry,t),n}}}(),L=function(){function u(e,a){var t,n=O.parse(e);return!n||(n.pattern.invalidRules=[],q.clearErrorProxy(e),!!function(e){switch(e.pattern.type){case h.string:return j.string.set(e),j.string;case h.integer:return j.number.set(e,!0),j.number;case h.float:return j.number.set(e,!1),j.number;case h.timeline:return j.timeline.set(e),j.timeline;case h.email:return j.email.set(e),j.email;case h.url:return j.url.set(e),j.url;case h.in:return j.in.set(e),j.in;case h.file:return j.file.set(e),j.file;case h.regex:return j.regex.set(e),j.regex;case h.check:return j.check.set(e),j.check;default:throw spa.resource.get("ex.usp",{p:e.pattern.name})}}(n).validate()||(a||(q.populateErrorMessages(n),q.onErrorProxy(n),(t=n).input.jquery.data(o.isEventAttached)||(l.validationIsDialogOrFlashDriver||(t.input.jquery.data(o.needValidation,!0),t.input.jquery.on("input.spa",function(){clearTimeout(t.input.jquery.data(o.timer)),t.input.jquery.data(o.timer,setTimeout(function(){u(t.input.jquery),t.input.jquery.data(o.needValidation,!1)},d.reValidationDelay))}).on("change.spa",function(){clearTimeout(t.input.jquery.data(o.timer)),t.input.jquery.data(o.needValidation)?t.input.jquery.data(o.timer,setTimeout(function(){u(t.input.jquery)},d.reValidationDelay)):t.input.jquery.data(o.needValidation,!0)}),t.confirmInput&&(t.input.jquery.data(o.needValidation,!0),t.confirmInput.jquery.on("input.spa",function(){clearTimeout(t.input.jquery.data(o.timer)),t.input.jquery.data(o.timer,setTimeout(function(){u(t.input.jquery),t.input.jquery.data(o.needValidation,!1)},d.reValidationDelay))}).on("change.spa",function(){clearTimeout(t.input.jquery.data(o.timer)),t.input.jquery.data(o.needValidation)?t.input.jquery.data(o.timer,setTimeout(function(){u(t.input.jquery)},d.reValidationDelay)):t.input.jquery.data(o.needValidation,!0)}))),t.input.jquery.data(o.isEventAttached,!0))),!1))}return{validate:function(e,a,t){if(!(e=m(e)).length)throw spa.resource.get("ex.fnf");var n=f(e),r=!0,i=l.validationIsDialogOrFlashDriver,o=n.length,s=0;for(t&&(n=n.not(t));s<o;s++)if(!u($(n[s]),a)&&(r=!1,i))return!1;return r},resetValidation:function(e){if(!(e=m(e)).length)throw spa.resource.get("ex.fnf");for(var a=f(e).off(".spa").removeData(r),t=0,n=a.length;t<n;t++)q.clearErrorProxy($(a[t]))},isValidInput:function(e,a){return u(m(e),a)}}}(),R={applyPreRules:function(e){var a=e.pattern.pre.length,t=e.pattern.pre;if(a){for(var n=0;n<a;n++){if(d.debug&&(!d.validationPre||!d.validationPre[t[n]]))throw spa.resource.get("ex.pfnf",{p:t[n]});e.input.valueToValidate=d.validationPre[t[n]](e.input.valueToValidate),e.confirmInput&&(e.confirmInput.valueToValidate=d.validationPre[t[n]](e.confirmInput.valueToValidate))}e.input.valueToValidate=p(e.input.valueToValidate.toString()),e.confirmInput&&(e.confirmInput.valueToValidate=p(e.confirmInput.valueToValidate.toString()))}},customRule:function(e,a){var t=e.pattern.rules[a];if(d.debug&&(!d.validationCustomRules||!d.validationCustomRules[t.name]||!spa.validation.isFunction(d.validationCustomRules[t.name].validate)))throw spa.resource.get("ex.rnf",{p:e.pattern.name,r:t.name});return d.validationCustomRules[t.name].validate(e,a)},validateParamsCount:function(e,a,t){if(t.params.length<e)throw spa.resource.get("ex.ipc",{p:a.pattern.name,r:t.name})},getParamValue:function(e,a,t,n,r){var i=void 0;switch(a){case"i":if(i=parseInt(e),isNaN(i)&&d.debug)throw spa.resource.get("ex.ipt",{p:t,r:n,a:e});return i;case"f":if(i=parseFloat(e),isNaN(i)&&d.debug)throw spa.resource.get("ex.ipt",{p:t,r:n,a:e});return i;case"t":if(!(i=spa.validation.isTimeline(e,r)))throw spa.resource.get("ex.ipt",{p:t,r:n,a:e});return i}},isOut:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=void 0;switch(e.type){case c.min:case c.s_min:case c.max:case c.s_max:return!!(t=e.params[1])&&"o"===t.toLowerCase();case c.range:case c.s_range:return!!(t=e.params[2])&&"o"===t.toLowerCase()[a]}return!1}},j={check:(_=void 0,{set:function(e){_=e},validate:function(){return R.applyPreRules(_),!_.input.valueToValidate&&_.pattern.required?(_.pattern.invalidRules.push(_.pattern.required),!1):0===_.pattern.invalidRules.length}}),email:(P=void 0,{set:function(e){P=e},validate:function(){R.applyPreRules(P);var e=P.pattern.invalidRules,a=P.pattern.rules.length,t=P.pattern.isLite,n=P.input.valueToValidate,r=void 0,i=void 0,o=void 0,s=void 0,u=d.debug;if(!n){if(P.pattern.required){if(e.push(P.pattern.required),!t)for(e.push(v("email",void 0)),i=0;i<a;i++)e.push(P.pattern.rules[i]);return!1}return!0}if(!spa.validation.isEmail(n)){if(e.push(v("email",void 0)),!t)for(i=0;i<a;i++)e.push(P.pattern.rules[i]);return!1}for(i=0;(!e.length||!t)&&i<a;){switch((r=P.pattern.rules[i]).type){case c.min:u&&R.validateParamsCount(1,P,r),o=R.getParamValue(r.params[0],"i",P.pattern.name,r.name),R.isOut(r)?n.length<=o&&e.push(r):n.length<o&&e.push(r);break;case c.max:u&&R.validateParamsCount(1,P,r),o=R.getParamValue(r.params[0],"i",P.pattern.name,r.name),R.isOut(r)?n.length>=o&&e.push(r):n.length>o&&e.push(r);break;case c.range:u&&R.validateParamsCount(2,P,r),o=R.getParamValue(r.params[0],"i",P.pattern.name,r.name),s=R.getParamValue(r.params[1],"i",P.pattern.name,r.name),R.isOut(r,0)?n.length<=o&&e.push(r):n.length<o&&e.push(r),R.isOut(r,1)?n.length>=s&&e.push(r):n.length>s&&e.push(r);break;case c.in_domain:for(u&&R.validateParamsCount(1,P,r),o=[],s=r.params.length-1;0<=s;s--)o.push(r.params[s]);spa.validation.isStringContainsOneOfArray(n,o)||e.push(r);break;case c.not_in_domain:for(u&&R.validateParamsCount(1,P,r),o=[],s=r.params.length-1;0<=s;s--)o.push(r.params[s]);spa.validation.isStringContainsOneOfArray(n,o)&&e.push(r);break;case c.confirmed:P.confirmInput&&P.confirmInput.valueToValidate===n||e.push(r);break;default:R.customRule(P,i)||e.push(r)}i++}return 0===e.length}}),file:(V=void 0,{set:function(e){V=e},validate:function(){R.applyPreRules(V);var e=V.pattern.invalidRules,a=V.pattern.rules.length,t=V.pattern.isLite,n=V.input.valueToValidate,r=void 0,i=void 0,o=void 0,s=void 0,u=void 0,l=void 0,p=n.length,f=d.debug;if(0===p){if(V.pattern.required){if(e.push(V.pattern.required),!t)for(i=0;i<a;i++)e.push(V.pattern.rules[i]);return!1}return!0}for(i=0;(!e.length||!t)&&i<a;){switch((r=V.pattern.rules[i]).type){case c.min:for(f&&R.validateParamsCount(1,V,r),o=1024*R.getParamValue(r.params[0],"f",V.pattern.name,r.name)*1024,l=u=0;u<p;u++)l+=n[u].size;R.isOut(r)?l<=o&&e.push(r):l<o&&e.push(r);break;case c.max:for(f&&R.validateParamsCount(1,V,r),o=1024*R.getParamValue(r.params[0],"f",V.pattern.name,r.name)*1024,l=u=0;u<p;u++)l+=n[u].size;R.isOut(r)?o<=l&&e.push(r):o<l&&e.push(r);break;case c.range:for(f&&R.validateParamsCount(2,V,r),o=1024*R.getParamValue(r.params[0],"f",V.pattern.name,r.name)*1024,s=1024*R.getParamValue(r.params[1],"f",V.pattern.name,r.name)*1024,l=u=0;u<p;u++)l+=n[u].size;R.isOut(r,0)?l<=o&&e.push(r):l<o&&e.push(r),R.isOut(r,1)?s<=l&&e.push(r):s<l&&e.push(r);break;case c.s_min:for(f&&R.validateParamsCount(1,V,r),o=1024*R.getParamValue(r.params[0],"f",V.pattern.name,r.name)*1024,u=0;u<p;u++)R.isOut(r)?n[u].size<=o&&e.push(r):n[u].size<o&&e.push(r);break;case c.s_max:for(f&&R.validateParamsCount(1,V,r),o=1024*R.getParamValue(r.params[0],"f",V.pattern.name,r.name)*1024,u=0;u<p;u++)R.isOut(r)?n[u].size>=o&&e.push(r):n[u].size>o&&e.push(r);break;case c.s_range:for(f&&R.validateParamsCount(2,V,r),o=1024*R.getParamValue(r.params[0],"f",V.pattern.name,r.name)*1024,s=1024*R.getParamValue(r.params[1],"f",V.pattern.name,r.name)*1024,u=0;u<p;u++)R.isOut(r,0)?n[u].size<=o&&e.push(r):n[u].size<o&&e.push(r),R.isOut(r,1)?n[u].size>=s&&e.push(r):n[u].size>s&&e.push(r);break;case c.ext:for(f&&R.validateParamsCount(1,V,r),o=[],u=0,s=r.params.length;u<s;u++)o.push(r.params[u]);for(u=0,s=n.length;u<s;u++)spa.validation.isStringContainsOneOfArray(n[u].name,o)||e.push(r);break;case c.len:f&&R.validateParamsCount(1,V,r),p!==(o=R.getParamValue(r.params[0],"f",V.pattern.name,r.name))&&e.push(r);break;default:R.customRule(V,i)||e.push(r)}i++}return 0===e.length}}),in:(C=void 0,{set:function(e){C=e},validate:function(){R.applyPreRules(C);var e=C.pattern.invalidRules,a=C.pattern.rules.length,t=C.pattern.isLite,n=C.input.valueToValidate,r=void 0,i=void 0,o=void 0,s=void 0,u=!1,l=d.debug;if(!n){if(C.pattern.required){if(e.push(C.pattern.required),!t)for(i=0;i<a;i++)e.push(C.pattern.rules[i]);return!1}return!0}for(i=0;(!e.length||!t)&&i<a;){switch((r=C.pattern.rules[i]).type){case c.items:for(l&&R.validateParamsCount(1,C,r),u=!0,o=[],s=r.params.length-1;0<=s;s--)o.push(r.params[s]);spa.validation.isStringIn(n,o,!0)||e.push(r);break;default:R.customRule(C,i)||e.push(r)}i++}if(!u)throw spa.resource.get("ex.pmr",{p:C.pattern.name,r:"items"});return 0===e.length}}),number:(D=void 0,k=void 0,{set:function(e,a){D=e,k=a},validate:function(){R.applyPreRules(D);var e=D.pattern.invalidRules,a=D.pattern.rules.length,t=D.pattern.isLite,n=D.input.valueToValidate,r=void 0,i=void 0,o=void 0,s=void 0,u=void 0,l=d.debug;if(d.trimValues||(D.input.valueToValidate=p(n,!0),D.confirmInput&&(D.confirmInput.valueToValidate=p(D.confirmInput.valueToValidate,!0))),!n){if(D.pattern.required){if(e.push(D.pattern.required),!t)for(k?e.push(v("integer",void 0)):e.push(v("float",void 0)),i=0;i<a;i++)e.push(D.pattern.rules[i]);return!1}return!0}if(k){if(!spa.validation.isInteger(n)){if(e.push(v("integer",void 0)),!t)for(i=0;i<a;i++)e.push(D.pattern.rules[i]);return!1}u=parseInt(n)}else{if(!spa.validation.isFloat(n)){if(e.push(v("float",void 0)),!t)for(i=0;i<a;i++)e.push(D.pattern.rules[i]);return!1}u=parseFloat(n)}for(i=0;(!e.length||!t)&&i<a;){switch((r=D.pattern.rules[i]).type){case c.positive:u<0&&e.push(r);break;case c.negative:0<=u&&e.push(r);break;case c.min:l&&R.validateParamsCount(1,D,r),o=R.getParamValue(r.params[0],"f",D.pattern.name,r.name),R.isOut(r)?u<=o&&e.push(r):u<o&&e.push(r);break;case c.max:l&&R.validateParamsCount(1,D,r),o=R.getParamValue(r.params[0],"f",D.pattern.name,r.name),R.isOut(r)?o<=u&&e.push(r):o<u&&e.push(r);break;case c.range:l&&R.validateParamsCount(2,D,r),o=R.getParamValue(r.params[0],"f",D.pattern.name,r.name),s=R.getParamValue(r.params[1],"f",D.pattern.name,r.name),R.isOut(r,0)?u<=o&&e.push(r):u<o&&e.push(r),R.isOut(r,1)?s<=u&&e.push(r):s<u&&e.push(r);break;case c.not:for(l&&R.validateParamsCount(1,D,r),o=[],s=r.params.length-1;0<=s;s--)o.push(r.params[s]);spa.validation.isStringIn(n,o,!0)&&e.push(r);break;case c.confirmed:D.confirmInput&&D.confirmInput.valueToValidate===n||e.push(r);break;default:R.customRule(D,i)||e.push(r)}i++}return 0===e.length}}),regex:(w=void 0,{set:function(e){w=e},validate:function(){R.applyPreRules(w);var e=w.pattern.invalidRules,a=w.pattern.rules.length,t=w.pattern.isLite,n=w.input.valueToValidate,r=void 0,i=void 0,o=void 0,s=void 0,u=!1,l=d.debug;if(!n){if(w.pattern.required){if(e.push(w.pattern.required),!t)for(i=0;i<a;i++)e.push(w.pattern.rules[i]);return!1}return!0}for(i=0;(!e.length||!t)&&i<a;){switch((r=w.pattern.rules[i]).type){case c.pattern:l&&R.validateParamsCount(1,w,r),u=!0,spa.validation.isRegMatch(n,r.params[0])||e.push(r);break;case c.min:l&&R.validateParamsCount(1,w,r),o=R.getParamValue(r.params[0],"i",w.pattern.name,r.name),R.isOut(r)?n.length<=o&&e.push(r):n.length<o&&e.push(r);break;case c.max:l&&R.validateParamsCount(1,w,r),o=R.getParamValue(r.params[0],"i",w.pattern.name,r.name),R.isOut(r)?n.length>=o&&e.push(r):n.length>o&&e.push(r);break;case c.range:l&&R.validateParamsCount(2,w,r),o=R.getParamValue(r.params[0],"i",w.pattern.name,r.name),s=R.getParamValue(r.params[1],"i",w.pattern.name,r.name),R.isOut(r,0)?n.length<=o&&e.push(r):n.length<o&&e.push(r),R.isOut(r,1)?n.length>=s&&e.push(r):n.length>s&&e.push(r);break;case c.len:l&&R.validateParamsCount(1,w,r),o=R.getParamValue(r.params[0],"i",w.pattern.name,r.name),n.length!==o&&e.push(r);break;case c.confirmed:w.confirmInput&&w.confirmInput.valueToValidate===n||e.push(r);break;default:R.customRule(w,i)||e.push(r)}i++}if(!u)throw spa.resource.get("ex.pmr",{p:w.pattern.name,r:"pattern"});return 0===e.length}}),string:(x=void 0,{set:function(e){x=e},validate:function(){R.applyPreRules(x);var e=x.pattern.invalidRules,a=x.pattern.rules.length,t=x.pattern.isLite,n=x.input.valueToValidate,r=void 0,i=void 0,o=void 0,s=void 0,u=d.debug;if(!n){if(x.pattern.required){if(e.push(x.pattern.required),!t)for(i=0;i<a;i++)e.push(x.pattern.rules[i]);return!1}return!0}for(i=0;(!e.length||!t)&&i<a;){switch((r=x.pattern.rules[i]).type){case c.of:u&&R.validateParamsCount(1,x,r),spa.validation.isStringOf(n,r.params)||e.push(r);break;case c.not_of:u&&R.validateParamsCount(1,x,r),spa.validation.isStringContainsOneOfRegex(n,r.params)&&e.push(r);break;case c.min:u&&R.validateParamsCount(1,x,r),o=R.getParamValue(r.params[0],"i",x.pattern.name,r.name),R.isOut(r)?n.length<=o&&e.push(r):n.length<o&&e.push(r);break;case c.max:u&&R.validateParamsCount(1,x,r),o=R.getParamValue(r.params[0],"i",x.pattern.name,r.name),R.isOut(r)?n.length>=o&&e.push(r):n.length>o&&e.push(r);break;case c.range:u&&R.validateParamsCount(2,x,r),o=R.getParamValue(r.params[0],"i",x.pattern.name,r.name),s=R.getParamValue(r.params[1],"i",x.pattern.name,r.name),R.isOut(r,0)?n.length<=o&&e.push(r):n.length<o&&e.push(r),R.isOut(r,1)?n.length>=s&&e.push(r):n.length>s&&e.push(r);break;case c.len:u&&R.validateParamsCount(1,x,r),o=R.getParamValue(r.params[0],"i",x.pattern.name,r.name),n.length!==o&&e.push(r);break;case c.not:for(u&&R.validateParamsCount(1,x,r),o=[],s=r.params.length-1;0<=s;s--)o.push(r.params[s]);spa.validation.isStringIn(n,o,!0)&&e.push(r);break;case c.confirmed:x.confirmInput&&x.confirmInput.valueToValidate===n||e.push(r);break;default:R.customRule(x,i)||e.push(r)}i++}return 0===e.length}}),timeline:(y=void 0,{set:function(e){(y=e).pattern.timelineFormat||(y.pattern.timelineFormat=v("format",[d.timelineFormat]))},validate:function(){R.applyPreRules(y);var e=y.pattern.invalidRules,a=y.pattern.rules.length,t=y.pattern.isLite,n=y.input.valueToValidate,r=y.pattern.timelineFormat.params[0],i=void 0,o=void 0,s=void 0,u=void 0,l=d.debug;if(!n){if(y.pattern.required){if(e.push(y.pattern.required),!t)for(e.push(y.pattern.timelineFormat),o=0;o<a;o++)e.push(y.pattern.rules[o]);return!1}return!0}if(!(n=spa.validation.isTimeline(n,r))){if(e.push(y.pattern.timelineFormat),!t)for(o=0;o<a;o++)e.push(y.pattern.rules[o]);return!1}for(o=0;(!e.length||!t)&&o<a;){switch((i=y.pattern.rules[o]).type){case c.min:s=l?(R.validateParamsCount(1,y,i),R.getParamValue(i.params[0],"t",y.pattern.name,i.name,r)):i.params[0],R.isOut(i)?spa.validation.isTimelineAfter(n,s,r)||e.push(i):spa.validation.isTimelineAfterOrEqual(n,s,r)||e.push(i);break;case c.max:s=l?(R.validateParamsCount(1,y,i),R.getParamValue(i.params[0],"t",y.pattern.name,i.name,r)):i.params[0],R.isOut(i)?spa.validation.isTimelineBefore(n,s,r)||e.push(i):spa.validation.isTimelineBeforeOrEqual(n,s,r)||e.push(i);break;case c.range:u=l?(R.validateParamsCount(2,y,i),s=R.getParamValue(i.params[0],"t",y.pattern.name,i.name,r),R.getParamValue(i.params[1],"t",y.pattern.name,i.name,r)):(s=i.params[0],i.params[1]);var p="";p+=R.isOut(i,0)?"(":"[",p+=R.isOut(i,1)?")":"]",spa.validation.isTimelineBetween(n,s,u,r,p)||e.push(i);break;case c.confirmed:y.confirmInput&&y.confirmInput.valueToValidate===y.input.valueToValidate||e.push(i);break;default:R.customRule(y,o)||e.push(i)}o++}return 0===e.length}}),url:(T=void 0,{set:function(e){T=e},validate:function(){R.applyPreRules(T);var e=T.pattern.invalidRules,a=T.pattern.rules.length,t=T.pattern.isLite,n=T.input.valueToValidate,r=void 0,i=void 0,o=void 0,s=void 0,u=d.debug;if(!n){if(T.pattern.required){if(e.push(T.pattern.required),!t)for(e.push(v("url",void 0)),i=0;i<a;i++)e.push(T.pattern.rules[i]);return!1}return!0}if(!spa.validation.isUrl(n)){if(e.push(v("url",void 0)),!t)for(i=0;i<a;i++)e.push(T.pattern.rules[i]);return!1}for(i=0;(!e.length||!t)&&i<a;){switch((r=T.pattern.rules[i]).type){case c.min:u&&R.validateParamsCount(1,T,r),o=R.getParamValue(r.params[0],"i",T.pattern.name,r.name),R.isOut(r)?n.length<=o&&e.push(r):n.length<o&&e.push(r);break;case c.max:u&&R.validateParamsCount(1,T,r),o=R.getParamValue(r.params[0],"i",T.pattern.name,r.name),R.isOut(r)?n.length>=o&&e.push(r):n.length>o&&e.push(r);break;case c.range:u&&R.validateParamsCount(2,T,r),o=R.getParamValue(r.params[0],"i",T.pattern.name,r.name),s=R.getParamValue(r.params[1],"i",T.pattern.name,r.name),R.isOut(r,0)?n.length<=o&&e.push(r):n.length<o&&e.push(r),R.isOut(r,1)?n.length>=s&&e.push(r):n.length>s&&e.push(r);break;case c.in_domain:for(u&&R.validateParamsCount(1,T,r),o=[],s=r.params.length-1;0<=s;s--)o.push(r.params[s]);spa.validation.isStringContainsOneOfArray(n,o)||e.push(r);break;case c.not_in_domain:for(u&&R.validateParamsCount(1,T,r),o=[],s=r.params.length-1;0<=s;s--)o.push(r.params[s]);spa.validation.isStringContainsOneOfArray(n,o)&&e.push(r);break;case c.confirmed:T.confirmInput&&T.confirmInput.valueToValidate===n||e.push(r);break;default:R.customRule(T,i)||e.push(r)}i++}return 0===e.length}})};function M(e){for(var a="",t=!1,n=0,r=e.length;n<r;n++)switch(e[n]){case"alpha":a+="a-zA-Z";break;case"num":a+="0-9";break;case"underscore":a+="_";break;case"dash":t=!0;break;case"spaces":a+="\\s";break;case"dot":a+=".";break;case"comma":a+=",";break;default:throw spa.resource.get("ex.usst",{p:e[n]})}return t&&(a+="-"),a}return{dialogDefaults:{title:"",message:"",status:"",icon:"",input:"",closeOnConfirm:!0,dialogClass:"",confirmBtn:{text:"",class:""},cancelBtn:{text:"",class:""}},patternTypes:h,ruleTypes:c,tags:o,cachingTags:r,spacerDialogDriver:function(s){return{message:function(e,a,t,n,r){var i={title:e,message:a,status:t,icon:spa.resource.get("icon."+n)||n,confirmBtn:{text:spa.resource.get("btn.ok"),class:"btn-default"},onConfirm:r};s(i)},confirm:function(e,a,t,n,r,i){var o={title:e,message:a,status:t,icon:spa.resource.get("icon."+n)||n,confirmBtn:{text:spa.resource.get("btn.yes"),class:"btn-default"},cancelBtn:{text:spa.resource.get("btn.no"),class:"btn-danger"},onConfirm:r,onCancel:i};s(o)},prompt:function(e,a,t,n,r,i){var o={title:e,message:a,status:t,icon:spa.resource.get("icon."+n)||n,input:'<input name="input" class="form-control" />',confirmBtn:{text:spa.resource.get("btn.continue"),class:"btn-default"},cancelBtn:{text:spa.resource.get("btn.cancel"),class:"btn-danger"},onConfirm:r,onCancel:i};s(o)}}},setOptions:function(e){var a;$.extend(!0,d,e),e.dialogCurrentDriver&&l.setDialogCD(e.dialogCurrentDriver),e.flashCurrentDriver&&l.setFlashCD(e.flashCurrentDriver),e.validationCurrentDriver&&l.setValidationCD(e.validationCurrentDriver),e.ajaxLaravelHeader&&((a=$('meta[name="csrf-token"]')).length&&(d.ajaxHeader?d.ajaxHeader["X-CSRF-TOKEN"]=a.attr("content"):d.ajaxHeader={"X-CSRF-TOKEN":a.attr("content")})),e.btnLoadingCurrentDriver&&l.setBtnLoadingCD(e.btnLoadingCurrentDriver),u()},setDialogCD:l.setDialogCD,setValidationCD:l.setValidationCD,setFlashCD:l.setFlashCD,setBtnLoadingCD:l.setBtnLoadingCD,getLocale:function(){return d.locale},setLocale:function(e){d.locale=e.toLowerCase(),u()},isLocale:function(e){return d.locale===e.toLowerCase()},isDebug:function(){return d.debug},getTimelineFormat:function(){return d.timelineFormat},dialog:{message:function(e,a,t,n,r){l.dialog.message(e,a,t,n,r)},confirm:function(e,a,t,n,r,i){l.dialog.confirm(e,a,t,n,r,i)},prompt:function(e,a,t,n,r,i){l.dialog.prompt(e,a,t,n,r,i)},messageSuccess:function(e,a,t){l.dialog.message(e,a,"success","success",t)},messageError:function(e,a,t){l.dialog.message(e,a,"danger","danger",t)},confirmDelete:function(e,a,t){spa.dialog.confirm(a||spa.resource.get("delete.title"),t||spa.resource.get("delete.confirm"),"warning","warning",function(){e()})},flash:function(e,a,t,n,r,i){l.flash.flash(e,a,t,n,r,i)},flashSuccess:function(e,a,t,n,r){l.flash.flash(e,a,"success",t,n,r)},flashError:function(e,a,t,n,r){l.flash.flash(e,a,"danger",t,n,r)}},validation:{getErrorList:d.validationDrivers.listOfErrors.getErrorList,validate:L.validate,resetValidation:L.resetValidation,isValidInput:L.isValidInput,isInteger:function(e){return spa.validation.isRegMatch(e,/^[+-]?\d+$/)||spa.validation.isRegMatch(e,/^[+-]?[\u0660-\u0669]+$/)},isFloat:function(e){return spa.validation.isRegMatch(e,/^[+-]?([0-9]*[.])?[0-9]+$/)||spa.validation.isRegMatch(e,/^[+-]?([\u0660-\u0669]*[.])?[\u0660-\u0669]+$/)},isEmail:function(e){return spa.validation.isRegMatch(e,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},isUrl:function(e){return spa.validation.isRegMatch(e,/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(:\d+)?(\/[-a-z\d%@_.~+&:]*)*(\?[;&a-z\d%@_.,~+:=-]*)?(#[-a-z\d_]*)?$/i)},isPositiveNumber:function(e){return spa.validation.isRegMatch(e,/^[+]?([0-9]*[.])?[0-9]+$/)||spa.validation.isRegMatch(e,/^[+]?([\u0660-\u0669]*[.])?[\u0660-\u0669]+$/)},isNegativeNumber:function(e){return spa.validation.isRegMatch(e,/^[-]([0-9]*[.])?[0-9]+$/)||spa.validation.isRegMatch(e,/^[-]([\u0660-\u0669]*[.])?[\u0660-\u0669]+$/)},isStringOf:function(e,a){var t=M(a);return t="^["+t+"]+$",spa.validation.isRegMatch(e,t)},isStringContainsOneOfRegex:function(e,a){var t=M(a);return t="["+t+"]+",spa.validation.isRegMatch(e,t)},isStringContainsOneOfArray:function(e,a,t){t||(e=e.toLowerCase());for(var n=0,r=a.length;n<r;n++)if(0<=e.indexOf(t?a[n]:a[n].toLowerCase()))return!0;return!1},isStringIn:function(e,a,t){t||(e=e.toLowerCase());for(var n=0,r=a.length;n<r;n++)if(e===(t?a[n]:a[n].toLowerCase()))return!0;return!1},isTimeline:function(e,a){var t=moment(e,a,!0);return!!t.isValid()&&t},isTimelineBeforeOrEqual:function(e,a,t){var n=moment.isMoment(a)?a:moment(a,t,!0),r=moment.isMoment(e)?e:moment(e,t,!0);return n.isValid()&&r.isValid()&&!n.isBefore(r)},isTimelineAfterOrEqual:function(e,a,t){var n=moment.isMoment(a)?a:moment(a,t,!0),r=moment.isMoment(e)?e:moment(e,t,!0);return n.isValid()&&r.isValid()&&!n.isAfter(r)},isTimelineBefore:function(e,a,t){var n=moment.isMoment(a)?a:moment(a,t,!0),r=moment.isMoment(e)?e:moment(e,t,!0);return n.isValid()&&r.isValid()&&r.isBefore(n)},isTimelineAfter:function(e,a,t){var n=moment.isMoment(a)?a:moment(a,t,!0),r=moment.isMoment(e)?e:moment(e,t,!0);return n.isValid()&&r.isValid()&&r.isAfter(n)},isTimelineBetween:function(e,a,t,n,r){var i=moment.isMoment(e)?e:moment(e,n,!0),o=moment.isMoment(a)?a:moment(a,n,!0),s=moment.isMoment(t)?t:moment(t,n,!0);return i.isValid()&&o.isValid()&&s.isValid()&&i.isBetween(o,s,null,r||"[]")},isRegMatch:function(e,a){return new RegExp(a).test(e)},isFunction:function(e){return"function"==typeof e},isArray:function(e){return e&&e.constructor===Array}},ajax:{request:function(e,a,t,n,r,i,o){var s={headers:d.ajaxHeader,type:e,url:a||spa.web.getUrl(),data:t,success:n,error:d.ajaxOnError};r&&(s.cache=!1,s.contentType=!1,s.processData=!1),i&&$.extend(s,i);var u=$.ajax(s);return o&&spa.dom.setLoadingButton(o,u),u},post:function(e,a,t,n){var r={headers:d.ajaxHeader,type:"post",url:e||spa.web.getUrl(),data:a,success:t,error:d.ajaxOnError},i=$.ajax(r);return n&&spa.dom.setLoadingButton(n,i),i},get:function(e,a,t,n){var r={headers:d.ajaxHeader,type:"get",url:e||spa.web.getUrl(),data:a,success:t,error:d.ajaxOnError},i=$.ajax(r);return n&&spa.dom.setLoadingButton(n,i),i},delete:function(e,a,t,n){var r={headers:d.ajaxHeader,type:"delete",url:e||spa.web.getUrl(),data:a,success:t,error:d.ajaxOnError},i=$.ajax(r);return n&&spa.dom.setLoadingButton(n,i),i},put:function(e,a,t,n){var r={headers:d.ajaxHeader,type:"put",url:e||spa.web.getUrl(),data:a,success:t,error:d.ajaxOnError},i=$.ajax(r);return n&&spa.dom.setLoadingButton(n,i),i},postBtn:function(e,a,t,n){return m(e).on("click",function(e){e.preventDefault(),spa.ajax.post(a,t,n,$(this))})},getBtn:function(e,a,t,n){return m(e).on("click",function(e){e.preventDefault(),spa.ajax.get(a,t,n,$(this))})},deleteBtn:function(e,a,t,n){return m(e).on("click",function(e){e.preventDefault(),spa.ajax.delete(a,t,n,$(this))})},putBtn:function(e,a,t,n){return m(e).on("click",function(e){e.preventDefault(),spa.ajax.put(a,t,n,$(this))})}},array:{insertLast:function(e,a){return e.push(a)},insertFirst:function(e,a){return e.unshift(a)},insertAt:function(e,a,t){return e.splice(a,0,t),e.length},removeLast:function(e){return e.pop()},removeFirst:function(e){return e.shift()},removeAt:function(e,a){var t=e[a];return e.splice(a,1),t},removeWhere:function(e,a){for(var t=e.length-1;0<=t;t--)!0===a(e[t],t)&&spa.array.removeAt(e,t)},searchGetBool:function(e,a){for(var t=0,n=e.length;t<n;t++)if(!0===a(e[t],t))return!0;return!1},searchGetIndex:function(e,a){for(var t=0,n=e.length;t<n;t++)if(!0===a(e[t],t))return t;return-1},searchGetItem:function(e,a){for(var t=0,n=e.length;t<n;t++)if(!0===a(e[t],t))return e[t]},foreach:function(e,a){if(spa.validation.isArray(e))for(var t=0,n=e.length;t<n&&!1!==a(e[t],t);t++);else for(var r in e)if(e.hasOwnProperty(r)&&!1===a(e[r],r))break},foreachReversed:function(e,a){for(var t=e.length-1;0<=t&&!1!==a(e[t],t);t--);},toString:function(e){return"["+e.join(", ")+"]"},copy:function(e){return $.extend(!0,[],e)},filter:function(e,a){var t=[];if(a)for(var n=0,r=e.length;n<r;n++)!0===a(e[n],n)&&t.push(e[n]);else for(var i=0,o=e.length;i<o;i++)e[i]&&t.push(e[i]);return t},wrap:function(e){return e?spa.validation.isArray(e)?e:[e]:[]}},dom:{click:function(e,a){return m(e).on("click",a)},getFriendlyName:function(e){var a=e.attr(o.friendlyName);return void 0===a?spa.resource.get("validation.defaultFriendlyName"):a},setDisable:function(e,a){if((e=m(e)).length)return e.is(":input")?e.prop("disabled",a):a?e.addClass("disabled"):e.removeClass("disabled"),e},setLoadingButton:function(e,a){l.btnLoading.set(e,a)},unsetLoadingButton:function(e,a){l.btnLoading.unset(e,a)},addHtmlAttr:function(e,a){if(e.attr("id",a.id).addClass(a.class),a.attr)for(var t in a.attr)e.attr(t,a.attr[t]);return e}},form:{submitAjax:function(e,a,t,n){if(!(e=m(e)).length)throw spa.resource.get("ex.fnf");if(t&&!L.validate(e))return!1;var r=e.attr("action")||spa.web.getUrl();if("post"!==(e.attr("method")||"get").trim().toLowerCase())return spa.ajax.get(r,e.serialize(),n,a);if(e.find("input[type=file]").length){var i=new FormData(e[0]);return spa.ajax.request("POST",r,i,n,!0,void 0,a)}return spa.ajax.post(r,e.serialize(),n,a)},submit:function(e,a,t){if(!(e=m(e)).length)throw spa.resource.get("ex.fnf");if(t&&!L.validate(e))return!1;spa.dom.setLoadingButton(a),e.submit()},registerNormalSubmitter:function(a,t,n){a=m(a),t=m(t),a.length&&t.length&&t.on("click",function(e){e.preventDefault(),spa.form.submit(a,t,n)})},registerAjaxSubmitter:function(a,t,n,r){a=m(a),t=m(t),a.length&&t.length&&t.on("click",function(e){e.preventDefault(),spa.form.submitAjax(a,t,n,r)})},getFormInputsAsObject:function(e){if(!(e=m(e)).length)throw spa.resource.get("ex.fnf");for(var a={},t=f(e),n=0,r=t.length;n<r;n++){var i=$(t[n]),o=i.attr("name");if(!o)return;i.is(":checkbox")?1===$('input[name="'+o+'"]').length?a[o]=spa.input.checkable.isChecked(i):spa.input.checkable.isChecked(i)&&(a[o]?a[o].push(p(i.val())):a[o]=[p(i.val())]):i.is(":radio")?a[o]=spa.input.getValue('input[name="'+o+'"]:checked'):a[o]=spa.input.getValue(i)}return a}},input:{getValue:function(e){if((e=m(e)).length)return p(e.val())},getFiles:function(e){if((e=m(e)).length)return e[0].files},setValue:function(e,a){return(e=m(e)).length?e.val(a).trigger("change"):e},select:{getSelectedOption:function(e){if((e=m(e)).length){var a=e.find(":selected");if(a.length)return a}},getSelectedValue:function(e){return spa.input.getValue(e)},getSelectedText:function(e){var a=spa.input.select.getSelectedOption(e);if(a)return p(a.text())},getSelectedIndex:function(e){return(e=m(e)).length?e.prop("selectedIndex"):-1},setSelectedIndex:function(e,a){if(0<=a&&(e=m(e)).length){var t=e.find("option:nth-child("+(a+1)+")");if(t.length)return t.prop("selected",!0),e.trigger("change"),e}},setSelectedValue:function(e,a){return spa.input.setValue(e,a)},setFirstOptionSelected:function(e){if((e=m(e)).length){var a=e.find("option:first-child");if(a.length)return a.prop("selected",!0),e.trigger("change"),e}},clearOptions:function(e){if((e=m(e)).length)return e.empty().trigger("change")},addOptions:function(e,a,t,n){if((e=m(e)).length){var r=[];n&&r.push($("<option selected disabled value>"+n+"</option>"));for(var i=0,o=a.length;i<o;i++)r.push(spa.dom.addHtmlAttr($('<option value="'+a[i].value+'">'+a[i].text+"</option>"),a[i]));return t?e.empty().html(r):e.append(r),e.trigger("change")}},addOption:function(e,a,t){if((e=m(e)).length){var n=spa.dom.addHtmlAttr($('<option value="'+a.value+'">'+a.text+"</option>"),a);return e.append(n),t&&n.prop("selected",!0),e.trigger("change")}}},checkable:{isChecked:function(e){if((e=m(e)).length)return e.is(":checked")},set:function(e,a){if((e=m(e)).length)return e.prop("checked",a).trigger("change")},getRadioGroupValue:function(e){return spa.input.getValue('input[name="'+e+'"]:checked')},getCheckboxGroupArray:function(e){var a=[],t=$('input[name="'+e+'"]:checked'),n=t.length;if(n)for(var r=0;r<n;r++)a.push(p($(t[r]).val()));return a}}},resource:{get:function(e,a){try{var t=i[e][d.locale]||i[e].def;return t&&a&&(t=spa.resource.replace(t,a)),t}catch(e){return}},set:function(e){var a=e.key;delete e.key;var t=void 0;t=(i[a]||(i[a]={}),i[a]),$.extend(t,e)},setArray:function(e){for(var a=0,t=e.length;a<t;a++)spa.resource.set(e[a])},replace:function(e,a){for(var t in a)e=e.replace(new RegExp(":"+t,"g"),a[t]);return e}},table:{addRows:function(e,a){if((e=m(e)).length){var t=[],n=void 0;if(spa.validation.isArray(a)){var r=0,i=a.length,o=void 0,s=void 0,u=void 0,l=void 0;if(!i)return;for(;r<i;r++){for(o=a[r],n=spa.dom.addHtmlAttr($("<tr>"),o),s=0,u=o.columns.length;s<u;s++)l=o.columns[s],n.append(spa.dom.addHtmlAttr($("<td>"),l).html(l.data));t.push(n[0])}}else{n=spa.dom.addHtmlAttr($("<tr>"),a);for(var p=0,f=a.columns.length;p<f;p++){var c=a.columns[p],d=spa.dom.addHtmlAttr($("<td>"),c).html(c.data);n.append(d)}t.push(n[0])}return $.fn.DataTable&&$.fn.DataTable.isDataTable(e)?(1<t.length?e.DataTable().rows.add(t):e.DataTable().row.add(t[0]),e.DataTable().columns.adjust().draw()):e.find("tbody").append(t),spa.table.updatePaginationTotal(t.length),1===t.length?t[0]:t}},removeRows:function(e,a){if((e=m(e)).length&&(a=e.find("tbody").find(a)).length)return $.fn.DataTable&&$.fn.DataTable.isDataTable(e)?1<a.length?e.DataTable().rows(a).remove().draw():e.DataTable().row(a).remove().draw():a.remove(),spa.table.updatePaginationTotal(-a.length),a},removeChecked:function(e,a){if((e=m(e)).length){var t=e.find('input[name="'+a+'"]:checked').closest("tr");if(t.length)return spa.table.removeRows(e,t)}},removeAll:function(e){if((e=m(e)).length){var a=e.find("tbody").find("tr");return $.fn.DataTable&&$.fn.DataTable.isDataTable(e)?e.DataTable().rows(a).remove().draw():a.remove(),spa.table.updatePaginationTotal(-a.length),a}},moveRows:function(e,a,t){var n=spa.table.removeRows(e,t);if(n.length&&(a=m(a)).length)return $.fn.DataTable&&$.fn.DataTable.isDataTable(a)?1<n.length?a.DataTable().rows.add(n).draw():a.DataTable().row.add(n).draw():a.find("tbody").append(n),n},moveChecked:function(e,a,t){var n=spa.table.removeChecked(e,t);if(n.length&&(a=m(a)).length)return $.fn.DataTable&&$.fn.DataTable.isDataTable(a)?1<n.length?a.DataTable().rows.add(n).draw():a.DataTable().row.add(n).draw():a.find("tbody").append(n),n.find(t).prop("checked",!1),n},count:function(e,a){if((e=m(e)).length)return $.fn.DataTable&&$.fn.DataTable.isDataTable(e)?a?e.DataTable().rows(a).count():e.DataTable().data().count():a?e.find("tbody").find(a).length:e.find("tbody").find("tr").length},updatePaginationTotal:function(e,a){if((a=a?m(a):$("#pagination").find(".total")).length){var t=0;try{t=parseInt(a.text())}catch(e){}var n=t+e;return a.text(n),n}return-1}},util:{randomString:function(e,a,t,n){var r=void 0,i="";a||n||t?(t&&(r="abcdefghijklmnopqrstuvwxyz"),n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),a&&(r+="0123456789")):r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var o=0,s=r.length;o<e;++o)i+=r.charAt(Math.floor(Math.random()*s));return i},debounce:function(t,n){var r=void 0,e=function(){var e=this,a=arguments;clearTimeout(r),r=setTimeout(function(){r=null,n.apply(e,a)},t)};return e.cancel=function(){clearTimeout(r),r=null},e},timer:function(e,a){return setInterval(a,e)},cancelTimer:function(e){clearInterval(e)},executeLater:function(e,a){return setTimeout(a,e)},cancelExecuteLater:function(e){clearTimeout(e)},getTimelineDiff:function(e,a,t){var n="";if(e&&a){t||(t=d.timelineFormat);var r=spa.validation.isTimeline(e,t),i=spa.validation.isTimeline(a,t);if(r&&i){var o=i.diff(r);if(0<o){var s=moment.duration(o),u=s.years(),l=s.months(),p=s.days(),f=s.hours(),c=s.minutes();u&&(n+=u+" :year"),l&&(n&&(n+=" :and "),n+=l+" :month"),p&&(n&&(n+=" :and "),n+=p+" :day"),f&&(n&&(n+=" :and "),n+=f+" :hour"),c&&(n&&(n+=" :and "),n+=c+" :minute")}n&&(n=spa.resource.replace(n,{year:spa.resource.get("year"),month:spa.resource.get("month"),day:spa.resource.get("day"),hour:spa.resource.get("hour"),minute:spa.resource.get("minute"),and:spa.resource.get("and")}))}}return n},token:{addToObj:function(e){return e[d.tokenName]=d.tokenValue,e},addToForm:function(e){e.prepend('<input type="hidden" name="'+d.tokenName+'" value="'+d.tokenValue+'" />')}}},web:{reload:function(e){window.location.reload(e)},redirect:function(e){window.location.replace(e)},newTab:function(e){window.open(e,"_blank")},getUrl:function(e){return void 0===e&&(e=window.location.href),new URL(e,window.location.origin).href},pathHas:function(e,a){return a||(a=spa.web.getPathWithoutQueryString()),-1!==a.indexOf(e)},getUrlWithoutQueryString:function(e){return void 0===e&&(e=window.location.href),new URL(e,window.location.origin).origin},getPath:function(e){return void 0===e&&(e=window.location.href),(e=new URL(e,window.location.origin)).pathname+e.search},getPathWithoutQueryString:function(e){return void 0===e&&(e=window.location.href),new URL(e,window.location.origin).pathname},getQueryStringAsObject:function(e){void 0===e&&(e=window.location.href);var a={},t=!0,n=!1,r=void 0;try{for(var i,o=new URL(e,window.location.origin).searchParams[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;a[s[0]]=s[1]}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return a},getQueryString:function(e,a){return void 0===a&&(a=window.location.href),a=new URL(a,window.location.origin),e?a.searchParams.get(e):a.search},updateQueryString:function(e,a){for(var t in void 0===a&&(a=window.location.href),a=new URL(a,window.location.origin),e)a.searchParams.set(t,e[t]);return a.href},removeQueryString:function(e,a){return void 0===a&&(a=window.location.href),a=new URL(a,window.location.origin),e?(a.searchParams.delete(e),a.href):a.origin},localize:function(e,a,t){return void 0===e&&(e=window.location.href),(a=a||d.locale)===d.defaultLocale?e:"1"==(t=t||d.localeMethod)?e:"2"==t?((e=new URL(e,window.location.origin)).pathname="/"+a+e.pathname,e.href):spa.web.updateQueryString(_defineProperty({},d.localeQueryKey,a),e)},urlSegments:function(e,a){void 0===a&&(a=window.location.href),a=new URL(a,window.location.origin);var t=spa.array.filter(a.pathname.split("/"));return e?t[e-1]:t}},init:{datepicker:function(e,a){if((e=m(e)).length){var t=d.datepickerOptions[d.locale];a&&(t=$.extend({},t,a)),e.datepicker(t)}},datepickerOnChange:function(e,n){return m(e).each(function(e,a){var t=(a=$(a)).val();a.on("change",function(){var e=a.val();e!==t&&n(a,t=e)})})},select2:function(e,a){if((e=m(e)).length){var t={dir:"ar"===d.locale?"rtl":"ltr"};a&&(t=$.extend({},t,a)),e.select2(t)}},dataTable:function(e,a){if((e=m(e)).length){var t=d.datatableOptions[d.locale];a&&(t=$.extend({},t,a)),e.DataTable(t)}},createCounter:function(t,n,r){t=m(t),n=m(n),t.length&&n.length&&(t.on("keyup",function(){var e=t.val().length,a=r-e;a<0&&t.val(t.val().substring(0,r)),n.html(a<0?0:a)}),t.trigger("keyup"))},autoComplete:function(e,t,a){(e=m(e)).length&&(e.autocomplete({source:function(e,a){$.ajax({url:t,dataType:"json",data:{term:e.term},success:function(e){a(e)}})},minLength:2}),a&&e.autocomplete("option","appendTo",a))},showMsg:function(e,a,t){t?(t=m(t)).length&&t.on("click",e,function(e){e.preventDefault(),spa.dialog.message("",$(this).attr(a))}):(e=m(e)).length&&e.on("click",function(e){e.preventDefault(),spa.dialog.message("",$(this).attr(a))})},deleteAndRedirect:function(a,t,n,r,i){(a=m(a)).length&&a.on("click",function(e){e.preventDefault(),spa.dialog.confirm(r||spa.resource.get("delete.title"),i||spa.resource.get("delete.confirm"),"warning","warning",function(){spa.ajax.delete(t,null,function(e){spa.dialog.messageSuccess("",e.message,function(){spa.web.redirect(n)})},a)})})},listDelete:function(e,n,r,i,o,s){i.on("click",e,function(e){e.preventDefault();var a=$(this),t=r.replace(":id",a.attr(n));spa.dialog.confirm(o||spa.resource.get("delete.title"),s||spa.resource.get("delete.confirm"),"warning","warning",function(){spa.ajax.delete(t,null,function(e){spa.dialog.messageSuccess("",e.message,function(){spa.table.removeRows(i,a.closest("tr"))})},a)})})}}}}();